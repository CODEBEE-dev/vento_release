"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2112],{62112:function(e,t,n){n.d(t,{Z:function(){return es}});var o=n(52322),s=n(25184);(0,s.Protofy)("features",{adminPage:"/settings"});let r=s.Schema.object((0,s.Protofy)("schema",{name:s.z.string().id().search(),value:s.z.any()}));(0,s.Protofy)("api",{name:"settings",prefix:"/api/core/v1/"});let a=s.AutoModel.createDerived("SettingModel",r);var i=n(22958),l=n(7211),c=n(5893),d=n(3828),p=n(2784),u=n(37288),h=n(47401),g=n(17518),x=n(26602),y=n(75136),f=n(93075),m=n(90251),v=n(65457),j=n(59991),b=n(70142),$=n(28575),w=n(14503),k=n(61773),C=n(72857),S=n(14071),z=n(32878),A=n(83427),I=n(23427),P=n(73147),E=n(41585),F=n(83716),_=n(68604),T=n(89560),W=n(13742),L=n(10281),D=n(57441),V=n(62624),M=n(55607),O=n(25538),N=n(19025),R=n(67662),Z=n(5333),J=n(19940);let K=[{key:"ai.enabled",label:"Enable AI Features",description:"Show AI chat panel and enable AI-powered features throughout the interface",type:"boolean",category:"ai",defaultValue:"true",icon:I.P},{key:"ai.provider",label:"AI Provider",description:"Select which AI service to use for chat and AI features",type:"select",category:"ai",options:[{value:"chatgpt",label:"ChatGPT (OpenAI)"},{value:"llama",label:"Local AI (LLaMA)"},{value:"lmstudio",label:"LM Studio"},{value:"skip",label:"Disabled"}],defaultValue:"chatgpt",icon:C.r},{key:"OPENAI_API_KEY",label:"OpenAI API Key",description:"Your OpenAI API key for ChatGPT access",type:"secret",category:"ai",defaultValue:"",icon:M.s,dependsOn:{key:"ai.provider",value:"chatgpt"},isKey:!0},{key:"ai.lmstudiohost",label:"LM Studio Host",description:"LM Studio server address (e.g., http://localhost:1234)",type:"text",category:"ai",defaultValue:"http://localhost:1234",icon:E.x,dependsOn:{key:"ai.provider",value:"lmstudio"}},{key:"theme.accent",label:"Accent Color",description:"Primary accent color used throughout the interface",type:"select",category:"appearance",options:[{value:"green",label:"Green"},{value:"blue",label:"Blue"},{value:"purple",label:"Purple"},{value:"pink",label:"Pink"},{value:"red",label:"Red"},{value:"orange",label:"Orange"},{value:"yellow",label:"Yellow"}],defaultValue:"green",icon:S.Y},{key:"code.visible",label:"Show Code Editor",description:"Display code editing panels in the interface",type:"boolean",category:"developer",defaultValue:"true",icon:z.E},{key:"cloud.telemetry",label:"Anonymous Telemetry",description:"Send anonymous usage data to help improve Vento",type:"boolean",category:"privacy",defaultValue:"true",icon:P.T}],G={ai:{label:"AI & Chat",icon:C.r,description:"Configure AI providers and chat"},appearance:{label:"Appearance",icon:S.Y,description:"Customize look and feel"},developer:{label:"Developer",icon:z.E,description:"Power user settings"},privacy:{label:"Privacy",icon:A.W,description:"Data and privacy preferences"}},H=e=>{let{value:t,onChange:n,placeholder:s}=e,[r,a]=(0,p.useState)(!1),[i,l]=(0,p.useState)(t||""),c=t&&t.length>0;return((0,p.useEffect)(()=>{r||l(t||"")},[t,r]),r)?(0,o.jsxs)(u.sL,{gap:"$2",alignItems:"center",children:[(0,o.jsx)(N.y,{minWidth:280,size:"$3",placeholder:s||"Enter key...",secureTextEntry:!0,value:i,onChangeText:l,backgroundColor:"$bgContent",borderColor:"$gray6"}),(0,o.jsx)(h.zx,{size:"$2",chromeless:!0,onPress:()=>{a(!1),l(t||"")},children:(0,o.jsx)(D.X,{size:14})}),(0,o.jsx)(b.I,{children:(0,o.jsx)(h.zx,{size:"$2",backgroundColor:"$color7",color:"white",onPress:()=>{n(i),a(!1)},children:(0,o.jsx)(k.J,{size:14})})})]}):(0,o.jsxs)(u.sL,{gap:"$2",alignItems:"center",minWidth:280,justifyContent:"flex-end",children:[(0,o.jsx)(g.x,{fontSize:"$3",color:c?"$color11":"$color9",fontFamily:"$mono",children:c?"••••••••••••":"(not set)"}),(0,o.jsx)(h.zx,{size:"$2",chromeless:!0,onPress:()=>{l(t||""),a(!0)},children:(0,o.jsx)(T.z,{size:14,color:"$color10"})})]})},X=e=>{let{value:t,onChange:n,placeholder:s}=e,[r,a]=(0,p.useState)(!1),[i,l]=(0,p.useState)(t||""),c=t&&t.length>0;return((0,p.useEffect)(()=>{r||l(t||"")},[t,r]),r)?(0,o.jsxs)(u.sL,{gap:"$2",alignItems:"center",children:[(0,o.jsx)(x.II,{minWidth:280,backgroundColor:"$bgContent",borderColor:"$gray6",borderWidth:1,placeholderTextColor:"$gray9",borderRadius:8,placeholder:s||"Enter value...",value:i,onChangeText:l}),(0,o.jsx)(h.zx,{size:"$2",chromeless:!0,onPress:()=>{a(!1),l(t||"")},children:(0,o.jsx)(D.X,{size:14})}),(0,o.jsx)(b.I,{children:(0,o.jsx)(h.zx,{size:"$2",backgroundColor:"$color7",color:"white",onPress:()=>{n(i),a(!1)},children:(0,o.jsx)(k.J,{size:14})})})]}):(0,o.jsxs)(u.sL,{gap:"$2",alignItems:"center",minWidth:280,justifyContent:"flex-end",children:[(0,o.jsx)(g.x,{fontSize:"$3",color:c?"$color11":"$color9",fontFamily:"$mono",children:c?t:s||"(not set)"}),(0,o.jsx)(h.zx,{size:"$2",chromeless:!0,onPress:()=>{l(t||""),a(!0)},children:(0,o.jsx)(T.z,{size:14,color:"$color10"})})]})},Y=e=>{let{setting:t,value:n,onChange:s,loading:r,isLast:a=!1}=e,i=(0,p.useMemo)(()=>{var e;return"boolean"===t.type?!0===n||"true"===n:null!==(e=null!=n?n:t.defaultValue)&&void 0!==e?e:""},[n,t]),l=e=>{"boolean"===t.type?s(t.key,e?"true":"false",t.isKey):s(t.key,e,t.isKey)};if(r)return(0,o.jsx)(R.p,{label:t.label,description:t.description,noDivider:a,control:(0,o.jsx)(y.$,{size:"small",color:"$color7"})});if("boolean"===t.type)return(0,o.jsx)(R.p,{type:"toggle",label:t.label,description:t.description,value:i,onChange:l,noDivider:a});if("select"===t.type){var c;return(0,o.jsx)(R.p,{type:"select",label:t.label,description:t.description,value:i,onChange:l,options:(null===(c=t.options)||void 0===c?void 0:c.map(e=>({value:e.value,label:e.label})))||[],noDivider:a})}return"text"===t.type?(0,o.jsx)(R.p,{label:t.label,description:t.description,noDivider:a,control:(0,o.jsx)(X,{value:i,onChange:l,placeholder:t.defaultValue})}):"secret"===t.type?(0,o.jsx)(R.p,{label:t.label,description:t.description,noDivider:a,control:(0,o.jsx)(H,{value:i,onChange:l,placeholder:"sk-..."})}):null},U=e=>{let{category:t,settings:n,allValues:s,onChange:r,loadingKeys:a}=e,i=G[t],l=n.filter(e=>{if(!e.dependsOn)return!0;let t=s[e.dependsOn.key];return Array.isArray(e.dependsOn.value)?e.dependsOn.value.includes(t):t===e.dependsOn.value});return 0===l.length?null:(0,o.jsx)(b.I,{children:(0,o.jsx)(R.j,{title:i.label,children:l.map((e,t)=>(0,o.jsx)(Y,{setting:e,value:s[e.key],onChange:r,loading:a.has(e.key),isLast:t===l.length-1},e.key))})})},q="wifi.",B=(e,t)=>{var n,o,s,r;if(!e.startsWith(q))return null;let a=e.slice(q.length),i="";if("string"==typeof t)try{let e=JSON.parse(t);a=null!==(n=null==e?void 0:e.ssid)&&void 0!==n?n:a,i=null!==(o=null==e?void 0:e.password)&&void 0!==o?o:""}catch(e){i=t}else t&&"object"==typeof t&&(a=null!==(s=null==t?void 0:t.ssid)&&void 0!==s?s:a,i=null!==(r=null==t?void 0:t.password)&&void 0!==r?r:"");return{key:e,ssid:a,password:i}},Q=e=>e.toLowerCase().trim().replace(/[^a-z0-9_-]+/g,"-"),ee=e=>{let{allSettings:t,token:n,onSettingsChange:r}=e,a=(0,w.Py)(),i=(0,J.Tg)("settings.update"),[l,c]=(0,p.useState)([]),[d,v]=(0,p.useState)(!1),[j,$]=(0,p.useState)(null),[k,C]=(0,p.useState)({ssid:"",password:""}),[S,z]=(0,p.useState)(!1),[A,I]=(0,p.useState)(""),[P,E]=(0,p.useState)(null);(0,p.useEffect)(()=>{let e=[];for(let[n,o]of Object.entries(t)){let t=B(n,o);t&&e.push(t)}c(e.sort((e,t)=>e.ssid.localeCompare(t.ssid)))},[t]);let V=async()=>{if(I(""),!k.ssid.trim()||!k.password.trim()){I("SSID and password are required");return}z(!0);let e=j||"".concat(q).concat(Q(k.ssid));try{let t=await s.API.post("/api/core/v1/settings/".concat(e,"?token=").concat(n),{name:e,value:{ssid:k.ssid.trim(),password:k.password}});t.isError&&!t.data&&(t=await s.API.post("/api/core/v1/settings?token=".concat(n),{name:e,value:{ssid:k.ssid.trim(),password:k.password}})),t.isError||(a.show("Wi-Fi saved",{duration:1500}),v(!1),$(null),C({ssid:"",password:""}),r())}catch(e){a.show("Error saving",{native:!0})}finally{z(!1)}},M=async e=>{z(!0);try{await s.API.get("/api/core/v1/settings/".concat(encodeURIComponent(e),"/delete?token=").concat(n)),a.show("Deleted",{duration:1500}),E(null),r()}catch(e){a.show("Error",{native:!0})}finally{z(!1)}};return(0,o.jsx)(b.I,{children:(0,o.jsxs)(u.FA,{children:[(0,o.jsxs)(u.sL,{ai:"center",justifyContent:"space-between",ml:"$3",mr:"$1",h:"$3.5",children:[(0,o.jsx)(f.__,{color:"$text",size:"$6",fontWeight:500,children:"Wi-Fi Networks"}),i&&(0,o.jsx)(h.zx,{bc:"$bgPanel",size:"$2",icon:_.v,onPress:()=>{$(null),C({ssid:"",password:""}),v(!0),I("")},children:"Add"})]}),(0,o.jsxs)(u.FA,{borderRadius:"$3",p:"$4",backgroundColor:"$bgPanel",gap:"$3",children:[0===l.length&&!d&&(0,o.jsxs)(u.sL,{ai:"center",gap:"$3",children:[(0,o.jsx)(F.k,{size:20,color:"$gray9"}),(0,o.jsx)(f.__,{color:"$gray10",fontSize:"$4",children:"No networks saved. Add one to speed up device provisioning."})]}),l.map((e,t)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(u.sL,{ai:"center",justifyContent:"space-between",gap:"$5",children:[(0,o.jsxs)(u.FA,{gap:"0px",flex:1,children:[(0,o.jsx)(f.__,{color:"$text",fontSize:"$5",lineHeight:"fit-content",children:e.ssid}),(0,o.jsx)(f.__,{fontSize:"$4",color:"$gray10",lineHeight:"fit-content",children:"•".repeat(Math.min(e.password.length,12))})]}),i&&(0,o.jsxs)(m.J2,{allowFlip:!0,placement:"bottom-end",open:P===e.key,onOpenChange:t=>E(t?e.key:null),children:[(0,o.jsx)(m.J2.Trigger,{children:(0,o.jsx)(h.zx,{size:"$3",circular:!0,chromeless:!0,icon:(0,o.jsx)(L.h,{size:18})})}),(0,o.jsx)(m.J2.Content,{padding:"$2",borderRadius:"$4",borderWidth:1,borderColor:"$gray2",backgroundColor:"$bgContent",elevate:!0,children:(0,o.jsxs)(u.FA,{gap:"$1",children:[(0,o.jsx)(h.zx,{size:"$3",chromeless:!0,icon:(0,o.jsx)(T.z,{size:14}),justifyContent:"flex-start",onPress:()=>{$(e.key),C({ssid:e.ssid,password:e.password}),v(!0),E(null),I("")},children:"Edit"}),(0,o.jsx)(h.zx,{theme:"red",size:"$3",chromeless:!0,icon:(0,o.jsx)(W.V,{size:14,color:"$red10"}),justifyContent:"flex-start",onPress:()=>M(e.key),disabled:S,children:"Delete"})]})})]})]},e.key),t<l.length-1&&!d&&(0,o.jsx)(u.FA,{width:"100%",height:2,backgroundColor:"$bgContent",opacity:.7})]})),d&&(0,o.jsxs)(o.Fragment,{children:[l.length>0&&(0,o.jsx)(u.FA,{width:"100%",height:2,backgroundColor:"$bgContent",opacity:.7}),(0,o.jsxs)(u.FA,{gap:"$1",children:[(0,o.jsxs)(u.sL,{alignItems:"center",justifyContent:"space-between",children:[(0,o.jsx)(f.__,{color:"$text",fontSize:"$5",fontWeight:"600",children:j?"Edit Network":"Add Network"}),(0,o.jsx)(h.zx,{size:"$2",circular:!0,chromeless:!0,icon:(0,o.jsx)(D.X,{size:16}),onPress:()=>v(!1)})]}),(0,o.jsxs)(u.FA,{children:[(0,o.jsx)(f.__,{fontSize:"$4",color:"$gray10",children:"SSID"}),(0,o.jsx)(x.II,{minWidth:280,backgroundColor:"$bgContent",borderColor:"$gray6",borderWidth:1,placeholderTextColor:"$gray9",borderRadius:8,placeholder:"Network name",value:k.ssid,onChangeText:e=>C({...k,ssid:e})})]}),(0,o.jsxs)(u.FA,{children:[(0,o.jsx)(f.__,{fontSize:"$4",color:"$gray10",children:"Password"}),(0,o.jsx)(N.y,{minWidth:280,placeholder:"Password",secureTextEntry:!0,value:k.password,onChangeText:e=>C({...k,password:e}),backgroundColor:"$bgContent",borderColor:"$gray6",borderWidth:1,borderRadius:8})]}),A&&(0,o.jsx)(g.x,{fontSize:"$2",color:"$red10",children:A}),(0,o.jsxs)(u.sL,{gap:"$3",justifyContent:"flex-end",mt:"$4",children:[(0,o.jsx)(h.zx,{theme:"red",chromeless:!0,onPress:()=>v(!1),children:"Cancel"}),(0,o.jsx)(h.zx,{backgroundColor:"$color7",color:"white",onPress:V,disabled:S,children:S?(0,o.jsx)(y.$,{size:"small",color:"white"}):j?"Update":"Save"})]})]})]})]})]})})},et=[{name:"Assets",href:"/workspace/assets",icon:"blocks",description:"Manage system assets",permission:"assets.read"},{name:"Tasks",href:"/workspace/tasks",icon:"zap",description:"Manage automated tasks",permission:"automations.read"},{name:"Devices",href:"/workspace/devices",icon:"router",description:"Manage connected devices",permission:"devices.read"},{name:"Storages",href:"/workspace/objects",icon:"boxes",description:"Manage data storages",permission:"objects.read"},{name:"Files",href:"/workspace/files?path=/",icon:"folder",description:"Manage system files",permission:"files.read"},{name:"Users",href:"/workspace/users",icon:"users",description:"Manage system users",permission:"users.read"},{name:"Keys",href:"/workspace/keys",icon:"key",description:"Manage system keys",permission:"keys.read"},{name:"Events",href:"/workspace/events",icon:"activity",description:"View system events",permission:"events.read"},{name:"Databases",href:"/workspace/databases",icon:"database",description:"Manage databases",permission:"databases.read"},{name:"Settings",href:"/workspace/settings",icon:"cog",description:"Configure system settings",permission:"settings.read"},{name:"Themes",href:"/workspace/themes",icon:"palette",description:"Change or customize themes",permission:"themes.read"}],en=(e,t)=>{window.parent!==window?(0,Z.Al)({type:"open-tab",name:e,url:t,tabType:"settings"}):window.location.href=t},eo=e=>{let{panel:t}=e;return(0,J.Tg)(t.permission)?(0,o.jsxs)(u.sL,{ai:"center",br:"$6",width:500,padding:"$4",backgroundColor:"var(--bgPanel)",gap:"$4",cursor:"pointer",hoverStyle:{opacity:.9},onPress:()=>en(t.name,t.href),children:[(0,o.jsx)(j.JO,{color:"var(--color)",name:t.icon,size:34,style:{opacity:.8}}),(0,o.jsxs)(u.FA,{children:[(0,o.jsx)(g.x,{fontSize:"$6",fontWeight:"500",children:t.name}),(0,o.jsx)(g.x,{fontSize:"$6",color:"$color9",children:t.description})]})]}):null};var es={settings:{component:e=>{let{pageSession:t}=e,[n]=(0,$.kP)(),[r,a]=(0,O.rV)(),[i,c]=(0,p.useState)({}),[d,h]=(0,p.useState)(new Set),[g,x]=(0,p.useState)(!0),f=(0,w.Py)();(0,p.useEffect)(()=>{(async()=>{let e=null==n?void 0:n.token;if(e)try{var t;let n=await s.API.get("/api/core/v1/settings/all?token=".concat(e));!n.isError&&n.data&&a(n.data);let o=await s.API.get("/api/core/v1/keys?all=1&token=".concat(e));if(!o.isError&&(null===(t=o.data)||void 0===t?void 0:t.items)){let e={};for(let t of o.data.items)e[t.name]=t.value||"";c(e)}}catch(e){console.error(e)}finally{x(!1)}})()},[n]);let m=async(e,t,o)=>{let r=null==n?void 0:n.token;if(r){if(o){c(n=>({...n,[e]:t})),h(t=>new Set(Array.from(t).concat(e)));try{(await s.API.post("/api/core/v1/keys/".concat(e,"?token=").concat(r),{name:e,value:t})).isError&&await s.API.post("/api/core/v1/keys?token=".concat(r),{name:e,value:t}),f.show("Key saved",{duration:1e3})}catch(e){f.show("Error saving key",{native:!0})}finally{h(t=>{let n=new Set(t);return n.delete(e),n})}}else{a(n=>({...n,[e]:t})),h(t=>new Set(Array.from(t).concat(e)));try{(await s.API.post("/api/core/v1/settings/".concat(e,"?token=").concat(r),{name:e,value:t})).isError&&await s.API.post("/api/core/v1/settings?token=".concat(r),{name:e,value:t}),f.show("Saved",{duration:1e3})}catch(t){f.show("Error",{native:!0});let e=await s.API.get("/api/core/v1/settings/all?token=".concat(r));!e.isError&&e.data&&a(e.data)}finally{h(t=>{let n=new Set(t);return n.delete(e),n})}}}},j=(0,p.useMemo)(()=>({...r,...i}),[r,i]),k=(0,p.useMemo)(()=>{let e={};for(let t of K)e[t.category]||(e[t.category]=[]),e[t.category].push(t);return e},[]);return(0,o.jsx)(l.D,{title:"Settings",pageSession:t,children:(0,o.jsx)(v.p,{flex:1,children:(0,o.jsx)(u.FA,{flex:1,padding:"$5",paddingTop:"$4",maxWidth:1e3,width:"100%",alignSelf:"center",children:g?(0,o.jsx)(u.FA,{flex:1,alignItems:"center",justifyContent:"center",padding:"$8",children:(0,o.jsx)(y.$,{size:"large",color:"$color7"})}):(0,o.jsxs)(u.FA,{gap:"$4",children:[Object.keys(G).map(e=>(0,o.jsx)(U,{category:e,settings:k[e]||[],allValues:j,onChange:m,loadingKeys:d},e)),(0,o.jsx)(ee,{allSettings:r,token:(null==n?void 0:n.token)||"",onSettingsChange:async()=>{let e=await s.API.get("/api/core/v1/settings/all?token=".concat(null==n?void 0:n.token));!e.isError&&e.data&&a(e.data)}}),(0,o.jsx)(b.I,{children:(0,o.jsx)(R.j,{title:"Advanced",children:(0,o.jsx)(R.p,{label:"Raw Settings",description:"View and edit all settings in raw format",control:(0,o.jsx)(V._,{size:20,color:"$gray9"}),onPress:()=>window.location.href="/workspace/settings/raw"})})})]})})})})}},"settings/raw":{component:e=>{let{initialItems:t,pageSession:n}=e;return(0,c.G)(()=>(null==t?void 0:t.isLoaded)?"Settings: "+JSON.stringify(t.data):""),(0,o.jsx)(l.D,{title:"Raw Settings",pageSession:n,children:(0,o.jsx)(i.V,{enableAddToInitialData:!0,disableViews:["grid"],defaultView:"list",sourceUrl:"/api/core/v1/settings",initialItems:t,numColumnsForm:1,name:"settings",model:a,columns:d.Z.columns(d.Z.column("name",e=>e.name,"name",void 0,!0,"400px"),d.Z.column("value",e=>"string"==typeof e.value?e.value:JSON.stringify(e.value),"value",void 0,!0))})})}},config:{component:e=>{let{pageSession:t}=e;return(0,o.jsx)(l.D,{title:"Config",pageSession:t,children:(0,o.jsxs)(u.sL,{f:1,m:"$6",marginTop:"$8",flexWrap:"wrap",gap:"$4",rowGap:"$4",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",children:[(0,o.jsx)(g.x,{paddingLeft:"$4",width:"100%",fontSize:"$9",fontWeight:"600",color:"$color11",children:"Config Panels"}),et.map((e,t)=>(0,o.jsx)(eo,{panel:e},t))]})})}}}},37614:function(e,t,n){n.d(t,{Z:function(){return o}});let o=(0,n(35321).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},19025:function(e,t,n){n.d(t,{y:function(){return p}});var o=n(52322),s=n(37288),r=n(26602),a=n(39608),i=n(75948),l=n(69517),c=n(2784),d=n(70142);let p=e=>{let{defaultVisible:t=!1,secureTextEntry:n,...p}=e,[u,h]=(0,c.useState)(t);return(0,o.jsxs)(s.sL,{f:1,ai:"center",children:[(0,o.jsx)(r.II,{placeholderTextColor:"$gray9",f:1,secureTextEntry:!!n&&!u,pr:"$7",...p}),n&&(0,o.jsx)(d.I,{children:(0,o.jsx)(l.z,{pos:"absolute",right:"$2",IconColor:u?"var(--color10)":"var(--gray9)",als:"center",onPress:()=>h(!u),Icon:u?a.b:i._})})]})}},67662:function(e,t,n){n.d(t,{j:function(){return y},p:function(){return x}});var o=n(52322),s=n(2784),r=n(93075),a=n(37288),i=n(26602),l=n(79327),c=n(37614),d=n(96862),p=n(59328);let u=e=>{let{children:t}=e;return(0,o.jsx)(r.__,{ml:"$3",h:"$3.5",color:"$text",size:"$6",fontWeight:500,children:t})},h=e=>{let{label:t,description:n,children:s,noDivider:i=!1,onPress:l}=e;return(0,o.jsxs)(a.FA,{children:[(0,o.jsxs)(a.sL,{ai:"center",justifyContent:"space-between",gap:"$5",...l?{cursor:"pointer",hoverStyle:{opacity:.8},onPress:l}:{},children:[(0,o.jsxs)(a.FA,{gap:"0px",flex:1,children:[(0,o.jsx)(r.__,{color:"$text",fontSize:"$5",lineHeight:"fit-content",children:t}),n&&(0,o.jsx)(r.__,{fontSize:"$4",color:"$gray10",lineHeight:"fit-content",children:n})]}),s]}),!i&&(0,o.jsx)(a.FA,{width:"100%",height:2,backgroundColor:"$bgContent",opacity:.7,my:"$3"})]})};h.displayName="SettingRow";let g=e=>(0,o.jsx)(i.II,{minWidth:280,backgroundColor:"$bgContent",borderColor:"$gray6",borderWidth:1,placeholderTextColor:"$gray9",borderRadius:8,...e}),x=e=>{var t,n;let{label:s,description:i,noDivider:u=!1,disabled:x=!1,onPress:y}=e;if("control"in e&&void 0!==e.control)return(0,o.jsx)(h,{label:s,description:i,noDivider:u,onPress:y,children:e.control});let{type:f}=e;if("checkbox"===f)return(0,o.jsxs)(a.FA,{children:[(0,o.jsxs)(a.sL,{ai:"center",gap:"$2",children:[(0,o.jsx)(l.XZ,{w:"$2",h:"$2",focusStyle:{outlineWidth:0},checked:e.value,onCheckedChange:e.onChange,disabled:x,className:"no-drag",backgroundColor:"$bgContent",borderColor:"$gray6",children:(0,o.jsx)(l.XZ.Indicator,{children:(0,o.jsx)(c.Z,{size:16,color:"var(--color8)"})})}),(0,o.jsx)(r.__,{children:s})]}),!u&&(0,o.jsx)(a.FA,{width:"100%",height:2,backgroundColor:"$bgContent",opacity:.7,my:"$3"})]});let m=null;switch(f){case"toggle":m=(0,o.jsx)(d.Z,{checked:e.value,onChange:e.onChange,disabled:x});break;case"select":m=(0,o.jsx)(a.FA,{minWidth:280,children:(0,o.jsx)(p.E,{triggerProps:{backgroundColor:"$bgContent",borderWidth:1,borderColor:"$gray6"},title:s,value:e.value,elements:e.options.map(e=>({value:e.value,caption:e.label})),setValue:e.onChange,disabled:x})});break;case"text":m=(0,o.jsx)(g,{value:e.value,placeholder:null!==(t=e.placeholder)&&void 0!==t?t:s,onChangeText:e.onChange,disabled:x});break;case"secret":m=(0,o.jsx)(g,{value:e.value,placeholder:null!==(n=e.placeholder)&&void 0!==n?n:"••••••••",onChangeText:e.onChange,secureTextEntry:!0,disabled:x})}return(0,o.jsx)(h,{label:s,description:i,noDivider:u,onPress:y,children:m})};x.displayName="Setting";let y=e=>{let{title:t,children:n}=e,r=s.Children.toArray(n).filter(s.isValidElement),i=-1;r.forEach((e,t)=>{if((0,s.isValidElement)(e)){var n,o;let s=(null===(n=e.type)||void 0===n?void 0:n.displayName)||(null===(o=e.type)||void 0===o?void 0:o.name)||"";("Setting"===s||"SettingRow"===s)&&(i=t)}});let l=r.map((e,t)=>{if((0,s.isValidElement)(e)){var n,o;let r=(null===(n=e.type)||void 0===n?void 0:n.displayName)||(null===(o=e.type)||void 0===o?void 0:o.name)||"";if("Setting"===r||"SettingRow"===r)return(0,s.cloneElement)(e,{noDivider:t===i})}return e});return(0,o.jsxs)(a.FA,{children:[(0,o.jsx)(u,{children:t}),(0,o.jsx)(a.FA,{borderRadius:"$3",p:"$4",backgroundColor:"$bgPanel",children:l})]})}}}]);