"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7674],{17674:function(e,r,o){o.r(r),o.d(r,{UISideMenu:function(){return b}});var n=o(52322),a=o(25184),s=o(14503),t=o(47246),i=o(37288),d=o(70142),c=o(2784),l=o(13296),u=o(68346),p=o(25538),h=o(66431),m=o(60892),j=o(6773);let b=e=>{let{leftIcons:r=(0,n.jsx)(n.Fragment,{}),icons:o=(0,n.jsx)(n.Fragment,{}),uiCode:b,boardRef:x,board:f,actions:g,states:v,resolvedTheme:C,onChange:w,readOnly:y=!1}=e,A=(null==v?void 0:v.boards)?v.boards[f.name]:{};(null==g?void 0:g.boards)&&g.boards[f.name];let F=(0,c.useRef)(b.code),P=(0,c.useRef)(b.code),$=(0,c.useRef)(null),I=(0,s.Py)(),M=(0,p.tg)("ai.enabled",!1);function _(e){$.current=e}let z=(0,t.Fg)(),S=(0,c.useMemo)(()=>(0,n.jsx)(h.AU,{onApplyRules:async e=>{if(!y)try{var r;let o=await a.API.post("/api/core/v1/autopilot/getBoardCode",{rules:e,states:A,actions:g.boards?g.boards[f.name]:{},boardName:f.name});if(x.current.rules=e,o.error||!(null===(r=o.data)||void 0===r?void 0:r.jsCode)){I.show("Error generating board code: ".concat(o.error));return}F.current=o.data.jsCode,P.current=o.data.jsCode,await a.API.post("/api/core/v1/boards/".concat(f.name),x.current)}catch(e){I.show("Error generating board code: ".concat(e.message)),console.error(e)}},disableAIPanels:!0,disableFlowMode:!0,defaultMode:"code",leftIcons:(0,n.jsx)(i.sL,{gap:"$3",pl:"$2",children:r}),icons:(0,n.jsxs)(i.sL,{gap:"$3",children:[o,(0,n.jsx)(i.sL,{p:"$2",pr:"$3",cursor:y?"default":"pointer",onPress:()=>{!y&&(a.API.post("/api/core/v1/boards/".concat(f.name,"/uicode"),{code:P.current}),w&&w(P.current))},o:y?.5:.8,pressStyle:y?void 0:{opacity:.8},ml:"$5",hoverStyle:y?void 0:{opacity:1},children:(0,n.jsx)(m.v,{size:"$1",color:"var(--color)"})})]}),viewPort:{x:20,y:window.innerHeight/8,zoom:.8},onFlowChange:e=>{y||(P.current=e)},onCodeChange:e=>{y||(P.current=e)},path:f.name+"_ui.jsx",sourceCode:P,monacoOptions:{folding:!0,lineDecorationsWidth:0,lineNumbersMinChars:0,lineNumbers:!0,minimap:{enabled:!1}},monacoProps:{onMount:_},readOnly:y}),[C,f.name,z,P.current,M]);return(0,n.jsx)(d.I,{children:(0,n.jsx)(i.FA,{f:1,pb:"$4",children:(0,n.jsxs)(l.eh,{direction:"horizontal",children:[(0,n.jsx)(l.s_,{defaultSize:67,children:(0,n.jsx)(i.FA,{f:1,h:"100%",children:S})}),(0,n.jsx)(u.Z,{direction:"vertical"}),M?(0,n.jsx)(l.s_,{defaultSize:30,minSize:25,style:{paddingTop:"32px"},children:(0,n.jsx)(i.FA,{h:"100%",f:1,o:y?.6:1,pointerEvents:y?"none":"auto",children:(0,n.jsx)(j.n,{setHTMLCode:e=>{!y&&$.current&&$.current.setValue(e)},htmlCode:b.code})})}):(0,n.jsx)(n.Fragment,{})]})})})}}}]);