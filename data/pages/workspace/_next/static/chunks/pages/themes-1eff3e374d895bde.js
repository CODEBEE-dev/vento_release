(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7227],{5138:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/themes",function(){return t(99020)}])},99020:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var o,l,r=t(52322);t(2784);var a=t(25184);(0,a.Protofy)("features",{adminPage:"/themes"});let i=a.Schema.object((0,a.Protofy)("schema",{name:a.z.string().min(1).id().search().static().size(2),config:a.z.any().optional().size(2),format:a.z.array(a.z.union([a.z.literal("json"),a.z.literal("css")])).optional().hidden()}));(0,a.Protofy)("api",{name:"themes",prefix:"/api/core/v1/"});let s=a.AutoModel.createDerived("ThemeModel",i);var d=t(22958),F=t(7211),g=t(5893),c=t(14071),h=t(14503),u=t(26602),m=t(14444),b=t(17518),f=t(37288),p=t(76197),_=t(36293),P=t(70142),C=t(21498),v=t(5333),y=t(19940);let j=null!==(l=null===C.l||void 0===C.l?void 0:null===(o=C.l.ui)||void 0===o?void 0:o.defaultTint)&&void 0!==l?l:"blue",w={themes:{light:{},dark:{},dark_gray:{color8:"#dddddd",bgPanel:"hsl(0, 0%, 17%)",bgContent:"hsl(15, 0%, 11%)"},light_gray:{bgPanel:"#FFFFFF",bgContent:"#F8F8F8"},dark_orange:{bgPanel:"hsl(20, 11.40%, 15.50%)",bgContent:"hsl(36, 31%, 10%)"},light_orange:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"},dark_yellow:{color1:"#30302e",color2:"#3b372d",bgPanel:"#383A44",bgContent:"#2A2D36"},light_yellow:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"},dark_green:{bgPanel:"#24252B",bgContent:"#1C1B21"},light_green:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"},dark_blue:{bgPanel:"hsl(215, 28%, 17%)",bgContent:"hsl(221, 41%, 11%)"},light_blue:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"},dark_purple:{bgPanel:"#353244",bgContent:"#292636"},light_purple:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"},dark_pink:{bgPanel:"#252A47",bgContent:"#1D233D"},light_pink:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"},dark_red:{bgPanel:"#000000",bgContent:"hsl(0, 6%, 8%)"},light_red:{bgPanel:"#FFFFFF",bgContent:"#F3F4F6"}}};var x=e=>{let{pageState:n,initialItems:t,pageSession:o,extraData:l}=e;(0,g.G)(()=>(null==t?void 0:t.isLoaded)?"Currently the system returned the following information: "+JSON.stringify(t.data):"");let i=(0,h.Py)(),C=(0,y.Tg)("themes.update"),x=e=>{let n=e;try{n=JSON.stringify(e,null,2)}catch(e){console.error("DEV: Error parsing JSON: ",e)}return n};return(0,r.jsx)(F.D,{title:"Themes",pageSession:o,children:(0,r.jsx)(d.V,{enableAddToInitialData:!0,disableViews:["raw","grid"],defaultView:"list",sourceUrl:"/api/core/v1/themes",initialItems:t,numColumnsForm:2,name:"themes",model:s,objectProps:{title:""},customFieldsForms:{name:{hideLabel:!0,component:(e,n,t,o,l,a)=>"add"===o?(0,r.jsx)(u.II,{placeholder:"theme name here...",value:n,w:"100%",fontSize:"$6",fontWeight:n?"600":"400",onChangeText:t}):(0,r.jsx)(P.I,{children:(0,r.jsx)(m.H3,{color:"$color8",children:n})})},config:{hideLabel:!0,component:(e,n,t,o,l)=>{var a;return(null==l?void 0:null===(a=l.format)||void 0===a?void 0:a.includes("json"))||"add"==o?(("add"!==o||n)&&""!=n||t(w),(0,r.jsx)(f.FA,{f:1,h:"300px",children:(0,r.jsx)(_.Monaco,{language:"json",sourceCode:x(n),onChange:e=>{try{let n=JSON.parse(e);t(n)}catch(e){}},options:{formatOnPaste:!0,formatOnType:!0}})})):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(b.x,{fontSize:"$3",color:"$gray9",children:"This theme does not have an editable version."})})}}},extraMenuActions:[{text:"Use this theme",icon:c.Y,action:async e=>{var n;let t={themeId:e.getId(),format:e.get("format"),accent:null!==(n=e.get("accent"))&&void 0!==n?n:j};if(e.get("config")){let n=(0,p._g)({...e.get("config")});t.css=n.getCSS()}if((await a.API.post("/api/core/v1/themes/update-css",t)).isError)return i.show("Error setting theme.",{tint:"red"});window.parent!==window?(0,v.Al)({type:"theme-changed"}):document.location.reload()},isVisible:e=>C,menus:["item"]}]})})},k=t(97729),T=t.n(k);function z(e){let n=C.l.projectName;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T(),{children:(0,r.jsx)("title",{children:n+" - Themes"})}),(0,r.jsx)(x,{...e})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=5138)}),_N_E=e.O()}]);