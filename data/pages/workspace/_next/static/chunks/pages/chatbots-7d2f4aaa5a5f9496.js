(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4549],{47148:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chatbots",function(){return a(49714)}])},49714:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var n=a(52322),r=a(25184);let o=r.Schema.object({name:r.Schema.string().id().static()}),i=r.AutoModel.createDerived("ChatbotModel",o);var s=a(37288),l=a(65457),c=a(86407),d=a(14503),h=a(17518),u=a(88505),m=a(36265),p=a(5893),x=a(78822),j=a(3828),g=a(22958),b=a(93228),f=a(7211),w=a(2784),C=a(8448),$=a(66171),y=a(23427);let v={"custom-chatbot":{id:"custom-chatbot",name:"Custom",description:"Creates a chatbot that can be used in your website",icon:$.Z},"chatgpt-chatbot":{id:"chatgpt-chatbot",name:"ChatGPT",description:"Creates a chatbot based on chatGPT that can be used in your website",icon:y.P}};var S=a(60417),P=a(38917),A=a(19940);let F={},I=e=>{let{children:t}=e;return(0,n.jsx)(s.sL,{jc:"center",ai:"center",gap:25,flexWrap:"wrap",children:t})},_=e=>{let{selected:t,setSelected:a}=e;return(0,n.jsxs)(s.FA,{children:[(0,n.jsx)(l.p,{mah:"500px",children:(0,n.jsx)(I,{children:Object.entries(v).map(e=>{let[r,o]=e;return(0,n.jsx)(S.w,{template:o,isSelected:t===r,onPress:()=>a(r)},r)})})}),(0,n.jsx)(c.LZ,{marginBottom:"$8"})]})},E=e=>{let{data:t,setData:a,error:r,setError:o}=e;return(0,n.jsx)(l.p,{height:"200px",children:(0,n.jsx)(P.EditableObject,{externalErrorHandling:!0,error:r,setError:o,data:t,setData:a,numColumns:v[t.data.template].extraFields?2:1,mode:"add",title:!1,model:i,extraFields:v[t.data.template].extraFields?v[t.data.template].extraFields():{}})})},N="/api/core/v1/chatbots";var z=e=>{let{pageState:t,initialItems:a,pageSession:o,extraData:l}=e,{replace:c}=(0,m.N)(null!=t?t:{});(0,p.G)(()=>"At this moment the user is browsing the Chatbot management page."+((null==a?void 0:a.isLoaded)?"Currently the system returned the following information: "+JSON.stringify(a.data):""));let[$,y]=(0,w.useState)(0),[S,P]=(0,w.useState)(!1),[I,z]=(0,w.useState)({data:{template:"custom-chatbot"}}),[L,T]=(0,w.useState)(""),Z=(0,d.Py)(),k=(0,A.Tg)("chatbots.create");return(0,n.jsxs)(f.D,{title:"Chatbots",pageSession:o,children:[(0,n.jsx)(b.a,{p:"$2",pt:"$5",pl:"$5",setOpen:P,open:S,hideAccept:!0,description:"",children:(0,n.jsx)(s.FA,{f:1,jc:"center",ai:"center",children:(0,n.jsx)(s.sL,{mr:"$5",children:(0,n.jsx)(C.M,{lastButtonCaption:"Create",id:"chatbots",onFinish:async()=>{try{let e=i.load(I.data);if(v[I.data.template].extraValidation){let e=v[I.data.template].extraValidation(I.data);if(null==e?void 0:e.error)throw e.error}let t=await r.API.post(N,e.create().getData());if(t.isError)throw t.error;P(!1),Z.show("Chatbot created",{message:e.getId()})}catch(e){T((0,r.getPendingResult)("error",null,e instanceof r.z.ZodError?e.flatten():e))}},slides:[{name:"Create new Chatbot",title:"Select your Template",component:(0,n.jsx)(_,{selected:null==I?void 0:I.data.template,setSelected:e=>z({...I,data:{...I.data,template:e}})})},{name:v[null==I?void 0:I.data.template].name,title:"Configure your Chatbot",component:(0,n.jsx)(E,{error:L,setError:T,data:I,setData:z})}]})})})}),(0,n.jsx)(g.V,{onDataAvailable:e=>y(e),onSelectItem:e=>{c("editFile",e.data.filePath)},rowIcon:u.S,sourceUrl:N,initialItems:a,numColumnsForm:1,name:"Chatbot",columns:j.Z.columns(j.Z.column("name",e=>e.name,"name",e=>(0,n.jsx)(s.sL,{id:"apis-datatable-"+e.name,children:(0,n.jsx)(h.x,{children:e.name})})),j.Z.column("type",e=>e.type,"type",e=>(0,n.jsx)(x.A,{text:e.type.toUpperCase(),color:"AutoAPI"==e.type?"$color5":"$gray5"})),j.Z.column("engine",e=>e.engine,"engine",e=>(0,n.jsx)(x.A,{text:e.engine,color:"$color5"}))),onAddButton:k?()=>P(!0):void 0,model:i,pageState:t,icons:F})]})},L=a(97729),T=a.n(L),Z=a(21498);function k(e){let t=Z.l.projectName;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T(),{children:(0,n.jsx)("title",{children:t+" - Chatbots"})}),(0,n.jsx)(z,{...e})]})}},60417:function(e,t,a){"use strict";a.d(t,{w:function(){return l}});var n=a(52322),r=a(37288),o=a(17518),i=a(70142),s=a(49852);let l=e=>{var t,a;let{template:l,isSelected:c,onPress:d}=e;return(0,n.jsx)(i.I,{children:(0,n.jsxs)(r.FA,{id:"template-card-"+l.id,onPress:d,height:"180px",width:"357px",overflow:"hidden",borderWidth:c?"$1":"$0.5",borderColor:c?"$color7":"$gray8",backgroundColor:c?"$color3":"",cursor:"pointer",borderRadius:"$3",justifyContent:"center",alignItems:"center",padding:"$4",children:[(0,n.jsx)(s.p,{size:35,color:"var(--color8)",name:null!==(t=l.icon)&&void 0!==t?t:"layout-dashboard"}),(0,n.jsx)(o.x,{ta:"center",marginBottom:"$2",marginTop:"$4",children:null!==(a=l.name)&&void 0!==a?a:l.id}),(0,n.jsx)(o.x,{ta:"center",fontWeight:"300",opacity:.4,children:l.description})]})})}},8448:function(e,t,a){"use strict";a.d(t,{M:function(){return h}});var n=a(52322),r=a(37288),o=a(22522),i=a(17518),s=a(47401),l=a(75136),c=a(2784),d=a(70142);let h=e=>{let{slides:t,lastButtonCaption:a,onFinish:h,id:u="pages",styles:m={},hideHeader:p=!1,disabled:x=!1,loading:j=!1}=e,[g,b]=(0,c.useState)(0),f=t.length,w=g>1?g-1:0,C=g<f-1?g+1:null,$=t.filter((e,t)=>t<=g).map(e=>e.name).join(" / "),y=f===g+1;return(0,n.jsxs)(r.FA,{id:"admin-dataview-create-dlg",p:"$3",pt:"$0",w:800,f:1,...m,children:[!p&&(0,n.jsxs)(r.sL,{id:"admin-eo",justifyContent:"space-between",width:"100%",children:[(0,n.jsx)(o.Kq,{flex:1,children:(0,n.jsx)(i.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:$})}),(0,n.jsx)(o.Kq,{flex:1,alignItems:"flex-end",children:(0,n.jsxs)(i.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:["[",g+1,"/",f,"]"]})})]}),(0,n.jsx)(d.I,{children:(0,n.jsx)(o.Kq,{children:t[g].title&&(0,n.jsx)(i.x,{fontWeight:"500",fontSize:30,color:"$color",children:t[g].title})})}),(0,n.jsx)(o.Kq,{f:1,mt:"$2",children:t[g].component}),(0,n.jsxs)(r.sL,{gap:40,jc:"center",mb:"$1",alignItems:"flex-end",children:[0!==g&&(0,n.jsx)(s.zx,{disabled:x||j,w:250,onPress:e=>{e.stopPropagation(),g>0&&b(w)},children:"Back"}),(0,n.jsx)(d.I,{children:(0,n.jsx)(s.zx,{disabled:x||j,id:"admin-"+u+"-add-btn",w:250,onPress:async e=>{e.stopPropagation(),C?b(C):h&&await h()},icon:y&&j?(0,n.jsx)(l.$,{size:"small",color:"$color"}):void 0,children:y?a:"Next"})})]})]})}}},function(e){e.O(0,[7952,7205,8917,2888,9774,179],function(){return e(e.s=47148)}),_N_E=e.O()}]);