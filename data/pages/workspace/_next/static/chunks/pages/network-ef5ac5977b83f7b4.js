(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6784],{95925:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/network",function(){return n(81182)}])},81182:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tf}});var r=n(52322),o=n(2784),i=n(42589),a=n(25184),l=n(3828),s=n(22958),d=n(7211),c=n(70952),h=n(68491),u=(n(53601),n(37288)),g=n(17518),p=n(78994),x=n(47401),m=n(65457),f=n(86407),v=n(93228),j=n(8448),y=n(60417),$=n(39608),w=n(75948),b=n(68604),S=n(72857),C=n(23427),A=n(15810),I=n(41585),k=n(66788),P=n(36265),z=n(70142),E=(n(59302),n(26602)),F=n(22522),W=n(5333);let D=e=>{let{children:t}=e;return(0,r.jsx)(u.sL,{justifyContent:"center",alignItems:"center",gap:25,flexWrap:"wrap",children:t})},L=e=>{let{selected:t,setSelected:n}=e,[i,l]=(0,o.useState)([]),s=async()=>{l((await a.API.get("/api/core/v2/templates/boards")).data||[])};return(0,o.useEffect)(()=>{s()},[]),(0,r.jsxs)(u.FA,{children:[(0,r.jsx)(m.p,{maxHeight:"500px",children:(0,r.jsx)(D,{children:Object.entries(i).map(e=>{let[o,i]=e;return(0,r.jsx)(y.w,{template:i,isSelected:(null==t?void 0:t.id)===(null==i?void 0:i.id),onPress:()=>n(i)},o)})})}),(0,r.jsx)(f.LZ,{marginBottom:"$8"})]})},R=e=>""!=e&&/^[a-z_]*$/.test(e),T=e=>{let{selected:t,setName:n,errorMessage:i=""}=e,[a,l]=(0,o.useState)("");return(0,o.useEffect)(()=>l(i),[i]),(0,r.jsx)(u.FA,{minHeight:"200px",justifyContent:"center",alignItems:"center",children:(0,r.jsxs)(u.FA,{width:"400px",gap:"$2",children:[(0,r.jsx)(E.II,{flex:1,value:null==t?void 0:t.name,onChangeText:e=>{R(e)?l(""):l("Name is required and must use only lowercase letters and underscores"),n(e)},placeholder:"Enter board name"}),(0,r.jsx)(g.x,{marginLeft:"$2",height:"$1",fontSize:"$2",color:"$red8",children:a})]})})},N=[{name:"Select Template",title:"Select your Template"},{name:"Configure",title:"Board Name"}];var _=n(14503),O=n(92580),V=n(15612),U=n(38917),M=n(33943);let B="custom-api",q=e=>{var t;let n=null!==(t=O.e[B])&&void 0!==t?t:Object.values(O.e)[0];return e&&O.e[e]?O.e[e]:n},Z=e=>{let{children:t}=e;return(0,r.jsx)(u.sL,{justifyContent:"center",alignItems:"center",gap:25,flexWrap:"wrap",children:t})},H=e=>{let{selected:t,setSelected:n}=e;return(0,r.jsxs)(u.FA,{children:[(0,r.jsx)(m.p,{maxHeight:"500px",children:(0,r.jsx)(Z,{children:Object.entries(O.e).map(e=>{let[o,i]=e;return(0,r.jsx)(y.w,{template:i,isSelected:t===o,onPress:()=>n(o)},o)})})}),(0,r.jsx)(f.LZ,{marginBottom:"$8"})]})},K=e=>{var t;let{data:n,setData:o,error:i,setError:a,objects:l,template:s}=e,d=null!=s?s:q(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.template),c=(null==d?void 0:d.extraFields)?d.extraFields(l):{};return(0,r.jsx)(m.p,{height:"250px",children:(0,r.jsx)(U.EditableObject,{externalErrorHandling:!0,error:i,setError:a,data:n,setData:o,numColumns:(null==d?void 0:d.extraFields)?2:1,mode:"add",title:!1,model:V.h,extraFields:{...c}})})};var G=n(75136),J=n(90251),X=n(7173),Y=n(19025),Q=n(10281),ee=n(89560),et=n(13742),en=n(28965),er=n(7244),eo=n(86184),ei=n(71727),ea=n(56337);let el="/api/core/v1/devices",es="wifi.",ed=e=>{let{value:t,onChange:n,placeholder:o}=e;return(0,r.jsxs)(u.sL,{position:"relative",children:[(0,r.jsx)(en.o,{size:18,style:{position:"absolute",left:12,top:14,opacity:.7}}),(0,r.jsx)(E.II,{value:t,onChangeText:n,placeholder:o,size:"$4",paddingLeft:40,backgroundColor:"$gray3",borderColor:"$gray6",borderWidth:1,outlineColor:"$gray8"})]})},ec=e=>{let{icon:t,name:n}=e;return t?t.includes("/")||t.startsWith("http")?(0,r.jsx)("img",{src:t,alt:n,style:{width:28,height:28,objectFit:"contain",borderRadius:6}}):(0,r.jsx)(eo.N1,{name:t,size:22,color:"var(--color10)"}):null},eh=e=>{let{src:t,alt:n}=e;return t?(0,r.jsx)("img",{src:t,alt:n,style:{width:440,maxWidth:"100%",height:"auto",maxHeight:320,objectFit:"contain",borderRadius:10,display:"block"}}):null},eu=e=>{let{item:t,active:n,onSelect:o}=e;return(0,r.jsx)(u.FA,{onPress:o,cursor:"pointer",padding:"$3",borderRadius:"$4",backgroundColor:n?"$color3":"$gray2",borderWidth:1,borderColor:n?"$color7":"$gray5",alignItems:"flex-start",hoverStyle:{borderColor:"$color7",backgroundColor:"$color2"},children:(0,r.jsxs)(u.sL,{gap:"$3",alignItems:"center",children:[(0,r.jsx)(ec,{icon:t.icon,name:t.name}),(0,r.jsx)(g.x,{fontWeight:"700",color:"$color11",children:t.name})]})},t.id)},eg=e=>{let{items:t,selectedId:n,onSelect:o,search:i,onSearchChange:a,searchPlaceholder:l,emptyMessage:s,renderPreview:d,error:c,loading:h,loadingMessage:p}=e,x=i.trim().toLowerCase(),f=x?t.filter(e=>{var t,n;return"".concat(null!==(t=e.name)&&void 0!==t?t:""," ").concat(null!==(n=e.description)&&void 0!==n?n:"").toLowerCase().includes(x)}):t,v=f.find(e=>e.id===n)||f[0];return h?(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(G.$,{size:"small"}),(0,r.jsx)(g.x,{color:"$gray10",children:p||"Loading..."})]}):0===t.length?(0,r.jsx)(g.x,{color:"$gray11",children:s}):(0,r.jsxs)(u.FA,{gap:"$3",width:"100%",children:[c&&(0,r.jsx)(g.x,{color:"$red9",fontSize:"$2",children:c}),(0,r.jsx)(ed,{value:i,onChange:a,placeholder:l}),(0,r.jsxs)(u.sL,{gap:"$4",alignItems:"flex-start",width:"100%",height:520,children:[(0,r.jsx)(u.FA,{width:380,flexShrink:0,height:"100%",children:(0,r.jsx)(m.p,{style:{width:"100%",flexShrink:0,flexGrow:0,minHeight:360},children:(0,r.jsx)(u.FA,{gap:"$2",padding:"$1",children:0===f.length?(0,r.jsx)(u.FA,{padding:"$3",borderRadius:"$4",borderWidth:1,borderColor:"$gray5",backgroundColor:"$gray2",children:(0,r.jsx)(g.x,{color:"$gray10",children:"No items match your search."})}):f.map(e=>(0,r.jsx)(eu,{item:e,active:(null==v?void 0:v.id)===e.id,onSelect:()=>o(e.id)},e.id))})})}),(0,r.jsx)(u.FA,{flex:1,height:"100%",backgroundColor:"$gray2",borderWidth:1,borderColor:"$gray4",borderRadius:"$4",padding:"$4",children:(0,r.jsx)(m.p,{style:{width:"100%"},children:(0,r.jsx)(u.FA,{gap:"$3",alignItems:"flex-start",paddingBottom:"$2",children:d(v)})})})]})]})},ep=e=>{var t;let{selected:n,setSelected:i,definitions:a}=e,[l,s]=(0,o.useState)(""),d=[{id:"__none__",name:"Blank Device",description:"Create a device from scratch!",icon:"cpu"},...((null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.items)||[]).map(e=>{var t,n,r,o;return{id:e.name,name:e.name,description:(null===(t=e.description)||void 0===t?void 0:t.trim())||"Board: ".concat((null===(n=e.board)||void 0===n?void 0:n.name)||e.board||"Unknown"),icon:null===(r=e.board)||void 0===r?void 0:r.icon,image:null===(o=e.board)||void 0===o?void 0:o.image}})];return(0,r.jsxs)(u.FA,{gap:"$3",width:"100%",children:[(0,r.jsx)(eg,{items:d,selectedId:n,onSelect:i,search:l,onSearchChange:s,searchPlaceholder:"Search templates…",emptyMessage:"No templates available.",renderPreview:e=>e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.x,{fontSize:"$7",fontWeight:"700",color:"$color11",children:e.name}),(0,r.jsx)(eh,{src:e.image,alt:e.name}),(0,r.jsx)(g.x,{color:"$gray10",fontSize:"$4",children:e.description||"No description available."})]}):(0,r.jsx)(g.x,{color:"$gray9",children:"Select a template to see details"})}),(0,r.jsx)(f.LZ,{marginBottom:"$8"})]})},ex=e=>{var t;let{boards:n,selectedBoard:i,setSelectedBoard:a,error:l}=e,[s,d]=(0,o.useState)(""),c=((null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.items)||[]).map(e=>({id:e.name,name:e.name,icon:e.icon,image:e.image,extra:{core:e.core}})).sort((e,t)=>e.name.localeCompare(t.name));return(0,r.jsx)(u.FA,{gap:"$3",marginBottom:"$4",width:"100%",children:(0,r.jsx)(eg,{items:c,selectedId:i,onSelect:a,search:s,onSearchChange:d,searchPlaceholder:"Search boards…",emptyMessage:"No boards found. Please create a board first.",error:l,loading:!(null==n?void 0:n.isLoaded),loadingMessage:"Loading boards…",renderPreview:e=>{var t;return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.x,{fontSize:"$7",fontWeight:"700",color:"$color11",children:e.name}),e.image?(0,r.jsx)(eh,{src:e.image,alt:e.name}):(0,r.jsx)(g.x,{color:"$gray9",children:"No image available"}),(null===(t=e.extra)||void 0===t?void 0:t.core)&&(0,r.jsxs)(g.x,{color:"$gray10",fontWeight:"500",children:["Core: ",e.extra.core]})]}):(0,r.jsx)(g.x,{color:"$gray9",children:"Select a board to see details"})}})})},em=e=>""!==e&&/^[a-z0-9_]+$/.test(e),ef=e=>{let{data:t,setData:n,errorMessage:i=""}=e,[a,l]=(0,o.useState)("");return(0,o.useEffect)(()=>l(i),[i]),(0,r.jsx)(u.FA,{alignItems:"center",paddingVertical:"$2",children:(0,r.jsxs)(u.FA,{width:"400px",gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$4",color:"$gray11",children:"Device Name"}),(0,r.jsx)(E.II,{flex:1,value:(null==t?void 0:t.name)||"",onChangeText:e=>{em(e)?l(""):l("Name is required and must use only lowercase letters, numbers or underscores"),n({...t,name:e})},placeholder:"my_esp32_device"}),a?(0,r.jsx)(g.x,{marginLeft:"$2",fontSize:"$2",color:"$red8",children:a}):null]})})},ev=e=>e.toLowerCase().trim().replace(/[^a-z0-9_-]+/g,"-"),ej=e=>{var t,n,r,o,i,a,l,s,d,c;let h=null!==(o=null!==(r=null==e?void 0:e.name)&&void 0!==r?r:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.name)&&void 0!==o?o:"";if(!h.startsWith(es))return null;let u=null!==(a=null!==(i=null==e?void 0:e.value)&&void 0!==i?i:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.value)&&void 0!==a?a:null==e?void 0:e.data,g=h.slice(es.length),p="";if("string"==typeof u)try{let e=JSON.parse(u);g=null!==(l=null==e?void 0:e.ssid)&&void 0!==l?l:g,p=null!==(s=null==e?void 0:e.password)&&void 0!==s?s:""}catch(e){p=null!=u?u:""}else u&&"object"==typeof u&&(g=null!==(d=null==u?void 0:u.ssid)&&void 0!==d?d:g,p=null!==(c=null==u?void 0:u.password)&&void 0!==c?c:"");return{key:h,ssid:g,password:p}},ey=(0,o.forwardRef)((e,t)=>{let{active:n,wifiError:i,onClearError:l}=e,s=(0,_.Py)(),[d,c]=(0,o.useState)([]),[h,p]=(0,o.useState)(null),[f,v]=(0,o.useState)({ssid:"",password:"",key:void 0}),[j,y]=(0,o.useState)(!1),[$,w]=(0,o.useState)(!1),[b,S]=(0,o.useState)(""),[C,A]=(0,o.useState)(!1),[I,k]=(0,o.useState)(null),P=async()=>{y(!0);try{var e,t,n,r;let o=await a.API.get("/api/core/v1/settings?all=1");if(o.isError)s.show("Unable to load Wi-Fi credentials",{message:null==o?void 0:null===(r=o.error)||void 0===r?void 0:r.message});else{let r=(null!==(n=null!==(t=null==o?void 0:null===(e=o.data)||void 0===e?void 0:e.items)&&void 0!==t?t:null==o?void 0:o.data)&&void 0!==n?n:[]).map(ej).filter(e=>!!e).sort((e,t)=>e.ssid.localeCompare(t.ssid));c(r),r.length?(p(r[0].key),v({ssid:r[0].ssid,password:r[0].password,key:r[0].key}),A(!1)):(p(null),v({ssid:"",password:"",key:void 0}),A(!0))}}catch(e){s.show("Unable to load Wi-Fi credentials")}finally{y(!1)}};(0,o.useEffect)(()=>{n&&P()},[n]);let F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.find(t=>t.key===e);n&&(p(e),v({ssid:n.ssid,password:n.password,key:e}),S(""),A(!!t.keepForm),k(null),null==l||l())},W=async()=>{var e,t;if(S(""),!f.ssid.trim()||!f.password.trim())return S("SSID and password are required"),null;w(!0);let n=null!==(e=f.key)&&void 0!==e?e:"".concat(es).concat(ev(f.ssid)||f.ssid),r={ssid:f.ssid.trim(),password:f.password};try{let e=await a.API.post("/api/core/v1/settings/".concat(n),{name:n,value:r});if(e.isError&&!e.data&&(e=await a.API.post("/api/core/v1/settings",{name:n,value:r})),e.isError)return s.show("Error saving Wi-Fi network",{message:null==e?void 0:null===(t=e.error)||void 0===t?void 0:t.message}),null;let o={key:n,ssid:f.ssid.trim(),password:f.password};return c(e=>[...e.filter(e=>e.key!==n),o].sort((e,t)=>e.ssid.localeCompare(t.ssid))),p(n),v({ssid:o.ssid,password:o.password,key:n}),A(!1),s.show("Wi-Fi saved",{message:o.ssid}),null==l||l(),o}catch(e){return s.show("Error saving Wi-Fi network"),null}finally{w(!1)}};(0,o.useImperativeHandle)(t,()=>({ensureSelection:async()=>{if(!h&&d.length>0){let e=d[0];p(e.key),v({ssid:e.ssid,password:e.password,key:e.key})}if(h){let e=d.find(e=>e.key===h);if(e)return e.ssid!==f.ssid||e.password!==f.password?await W():e}return f.ssid||f.password?await W():null}}));let D=async e=>{w(!0);try{let t=await a.API.get("/api/core/v1/settings/".concat(encodeURIComponent(e),"/delete"));if(null==t?void 0:t.isError)throw Error((null==t?void 0:t.error)||"Delete failed");c(t=>t.filter(t=>t.key!==e)),h===e&&(p(null),v({ssid:"",password:"",key:void 0}),A(!1))}catch(e){s.show("Error deleting Wi-Fi")}finally{w(!1)}};return(0,r.jsxs)(u.FA,{paddingHorizontal:"$4",paddingTop:"$2",paddingBottom:"$4",gap:"$3",width:"100%",maxWidth:820,alignSelf:"center",children:[i?(0,r.jsx)(g.x,{color:"$red9",fontSize:"$2",marginBottom:"$1",children:i}):null,j?(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(G.$,{size:"small"})," ",(0,r.jsx)(g.x,{color:"$gray10",children:"Loading saved Wi-Fi networks…"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.FA,{gap:"$3",boc:"$color6",bw:1,br:"$5",p:"$3",bc:"$bg",children:[(0,r.jsxs)(u.sL,{justifyContent:"space-between",alignItems:"center",paddingBottom:"$2",children:[(0,r.jsx)(g.x,{fontWeight:"700",fontSize:"$6",children:"Saved networks"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{size:"$3",onPress:()=>{p(null),v({ssid:"",password:"",key:void 0}),S(""),A(!0),null==l||l()},children:"Add Wi-Fi"})})]}),d.length>0?(0,r.jsx)(m.p,{maxHeight:240,paddingHorizontal:"$2",paddingVertical:"$2",children:(0,r.jsx)(u.FA,{gap:"$3",children:d.map(e=>{let t=h===e.key;return(0,r.jsx)(z.I,{tint:t?"primary":void 0,children:(0,r.jsx)(u.FA,{padding:"$3",borderWidth:1,borderColor:t?"$color9":"$color6",borderRadius:"$4",backgroundColor:t?"$color2":"$bg",gap:"$2",cursor:"pointer",hoverStyle:{borderColor:"$color9"},onPress:()=>F(e.key),children:(0,r.jsxs)(u.sL,{justifyContent:"space-between",alignItems:"center",gap:"$3",children:[(0,r.jsx)(u.FA,{gap:"$1",children:(0,r.jsx)(g.x,{fontWeight:"700",color:"$color11",children:e.ssid})}),(0,r.jsxs)(J.J2,{allowFlip:!0,placement:"bottom-end",open:I===e.key,onOpenChange:t=>k(t?e.key:null),children:[(0,r.jsx)(J.J2.Trigger,{children:(0,r.jsx)(x.zx,{size:"$2",circular:!0,icon:(0,r.jsx)(Q.h,{size:16}),onPress:t=>{var n;null==t||null===(n=t.stopPropagation)||void 0===n||n.call(t),k(e.key)}})}),(0,r.jsx)(J.J2.Content,{padding:"$2",br:"$4",bw:1,boc:"$color6",bc:"$color1",onPress:e=>{var t;return null==e?void 0:null===(t=e.stopPropagation)||void 0===t?void 0:t.call(e)},children:(0,r.jsxs)(u.FA,{gap:"$2",minWidth:160,children:[(0,r.jsx)(x.zx,{size:"$3",icon:(0,r.jsx)(ee.z,{size:16}),onPress:t=>{var n;null==t||null===(n=t.stopPropagation)||void 0===n||n.call(t),F(e.key,{keepForm:!0})},children:"Edit"}),(0,r.jsx)(z.I,{tint:"red",children:(0,r.jsx)(x.zx,{size:"$3",icon:(0,r.jsx)(et.V,{size:16}),onPress:t=>{var n;null==t||null===(n=t.stopPropagation)||void 0===n||n.call(t),D(e.key)},disabled:$,children:"Delete"})})]})})]})]})})},e.key)})})}):(0,r.jsxs)(u.FA,{gap:"$2",children:[(0,r.jsx)(g.x,{color:"$gray11",children:"No Wi-Fi credentials found yet."}),(0,r.jsx)(g.x,{color:"$gray10",fontSize:"$2",children:"Add one to speed up provisioning."})]})]}),C&&(0,r.jsxs)(u.FA,{gap:"$3",boc:"$color6",bw:1,br:"$5",p:"$3",bc:"$bg",children:[(0,r.jsx)(g.x,{fontWeight:"700",fontSize:"$6",children:f.key?"Edit Wi-Fi":"New Wi-Fi"}),(0,r.jsxs)(u.FA,{gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",fontWeight:"600",color:"$gray11",children:"SSID"}),(0,r.jsx)(E.II,{placeholder:"SSID",value:f.ssid,onChangeText:e=>v({...f,ssid:e})})]}),(0,r.jsxs)(u.FA,{gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",fontWeight:"600",color:"$gray11",children:"Password"}),(0,r.jsx)(Y.y,{placeholder:"Password",secureTextEntry:!0,value:f.password,onChangeText:e=>v({...f,password:e})})]}),b?(0,r.jsx)(g.x,{color:"$red9",fontSize:"$2",children:b}):(0,r.jsx)(g.x,{height:"$1"}),(0,r.jsx)(u.sL,{gap:"$2",justifyContent:"flex-end",marginTop:"$2",children:(0,r.jsx)(x.zx,{width:180,onPress:W,disabled:$,children:f.key?"Update Wi-Fi":"Save Wi-Fi"})})]})]})]})});ey.displayName="WifiStep";var e$=n(39006),ew=n(61773),eb=n(15641),eS=n(455),eC=n(34575),eA=n(83716),eI=n(67825),ek=n(65503),eP=n(28575),ez=n(38001);let eE=e=>{let{networkInfo:t,loading:n}=e;return n?(0,r.jsxs)(u.FA,{flex:1,alignItems:"center",justifyContent:"center",gap:"$4",children:[(0,r.jsx)(z.I,{children:(0,r.jsx)(G.$,{size:"large",color:"$color9"})}),(0,r.jsx)(g.x,{color:"$gray11",children:"Detecting network..."})]}):(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$6",paddingVertical:"$4",children:[(0,r.jsx)(z.I,{children:(0,r.jsx)(u.FA,{backgroundColor:"$color3",padding:"$6",borderRadius:100,alignItems:"center",justifyContent:"center",borderWidth:2,borderColor:"$color6",children:(0,r.jsx)(eA.k,{size:64,color:"var(--color9)"})})}),(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$2",maxWidth:500,children:[(0,r.jsx)(z.I,{children:(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(eA.k,{size:20,color:"var(--color9)"}),(0,r.jsx)(g.x,{fontSize:"$5",fontWeight:"600",textAlign:"center",color:"$color11",children:"Verify WiFi Connection"})]})}),(0,r.jsx)(g.x,{fontSize:"$3",color:"$gray11",textAlign:"center",children:"Make sure your Android device is connected to the same WiFi network as Vento."})]}),(0,r.jsx)(z.I,{children:(0,r.jsxs)(u.FA,{backgroundColor:"$color3",padding:"$4",borderRadius:"$4",width:"100%",maxWidth:500,gap:"$3",borderWidth:1,borderColor:"$color6",children:[(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(ek.f,{size:18,color:"var(--color9)"}),(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$color11",children:"Vento Network Information"})]}),(0,r.jsxs)(u.FA,{gap:"$2",paddingLeft:"$6",children:[(null==t?void 0:t.interface)&&(0,r.jsxs)(u.sL,{gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",color:"$color10",width:100,children:"Interface:"}),(0,r.jsx)(g.x,{fontSize:"$3",color:"$color12",fontFamily:"$mono",children:t.interface})]}),(null==t?void 0:t.ip)&&(0,r.jsxs)(u.sL,{gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",color:"$color10",width:100,children:"IP Address:"}),(0,r.jsx)(g.x,{fontSize:"$3",color:"$color12",fontFamily:"$mono",children:t.ip})]}),(null==t?void 0:t.baseUrl)&&(0,r.jsxs)(u.sL,{gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",color:"$color10",width:100,children:"Server URL:"}),(0,r.jsx)(g.x,{fontSize:"$3",color:"$color12",fontFamily:"$mono",numberOfLines:1,children:t.baseUrl})]})]})]})}),(0,r.jsx)(u.FA,{backgroundColor:"$gray3",padding:"$3",borderRadius:"$3",width:"100%",maxWidth:500,borderWidth:1,borderColor:"$gray6",children:(0,r.jsxs)(u.sL,{alignItems:"flex-start",gap:"$2",children:[(0,r.jsx)(eb.r,{size:16,color:"var(--gray11)",marginTop:2}),(0,r.jsxs)(u.FA,{flex:1,gap:"$1",children:[(0,r.jsx)(g.x,{fontSize:"$2",fontWeight:"600",color:"$gray11",children:"Remote Control Capabilities"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$gray11",children:"The Vento client app enables remote control features such as camera access, screenshots, location tracking, and shell commands. These capabilities are essential for Vento to work as intended, but please be aware that your device can be controlled remotely once connected. You can always deny permissions when prompted or revoke them later in your device settings if you no longer wish to use them."})]})]})}),(0,r.jsx)(u.FA,{backgroundColor:"$yellow3",padding:"$3",borderRadius:"$3",width:"100%",maxWidth:500,borderWidth:1,borderColor:"$yellow6",children:(0,r.jsxs)(u.sL,{alignItems:"flex-start",gap:"$2",children:[(0,r.jsx)(eI.b,{size:16,color:"var(--yellow11)",marginTop:2}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$yellow11",flex:1,children:"Your phone must be on the same WiFi network to scan the QR codes and connect. Check your phone's WiFi settings before continuing."})]})})]})},eF=e=>{let{apkUrl:t,networkInfo:n,loading:o,onCopy:i,copied:a}=e;return o?(0,r.jsxs)(u.FA,{flex:1,alignItems:"center",justifyContent:"center",gap:"$4",children:[(0,r.jsx)(G.$,{size:"large"}),(0,r.jsx)(g.x,{color:"$gray11",children:"Detecting network address..."})]}):(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$6",paddingVertical:"$4",children:[(0,r.jsx)(u.FA,{backgroundColor:"white",padding:"$4",borderRadius:"$4",alignItems:"center",justifyContent:"center",children:t&&(0,r.jsx)(ez.ZP,{value:t,size:200,level:"M"})}),(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$2",maxWidth:500,children:[(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(eS.U,{size:20,color:"var(--color9)"}),(0,r.jsx)(g.x,{fontSize:"$5",fontWeight:"600",textAlign:"center",children:"Step 2: Download Vento Client"})]}),(0,r.jsx)(g.x,{fontSize:"$3",color:"$gray11",textAlign:"center",children:"Scan this QR code with your Android device to download the Vento client app."}),(null==n?void 0:n.interface)&&(0,r.jsxs)(g.x,{fontSize:"$2",color:"$gray9",textAlign:"center",children:["Network: ",n.interface," (",n.ip,")"]})]}),(0,r.jsx)(u.FA,{backgroundColor:"$gray3",padding:"$3",borderRadius:"$3",width:"100%",maxWidth:500,children:(0,r.jsx)(g.x,{fontSize:"$2",color:"$gray11",fontFamily:"$mono",textAlign:"center",numberOfLines:1,children:t})}),(0,r.jsx)(x.zx,{size:"$3",onPress:i,icon:a?ew.J:e$.C,children:a?"Copied!":"Copy Download Link"})]})},eW=e=>{let{connectUrl:t,loading:n,onCopy:o,copied:i}=e;return n?(0,r.jsxs)(u.FA,{flex:1,alignItems:"center",justifyContent:"center",gap:"$4",children:[(0,r.jsx)(G.$,{size:"large"}),(0,r.jsx)(g.x,{color:"$gray11",children:"Generating connection code..."})]}):(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$6",paddingVertical:"$4",children:[(0,r.jsx)(u.FA,{backgroundColor:"white",padding:"$4",borderRadius:"$4",alignItems:"center",justifyContent:"center",children:t&&(0,r.jsx)(ez.ZP,{value:t,size:200,level:"M"})}),(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$2",maxWidth:500,children:[(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(eC.U,{size:20,color:"var(--color9)"}),(0,r.jsx)(g.x,{fontSize:"$5",fontWeight:"600",textAlign:"center",children:"Step 3: Connect to Vento"})]}),(0,r.jsx)(g.x,{fontSize:"$3",color:"$gray11",textAlign:"center",children:'Open the Vento app on your Android device and tap "Scan to Connect", then scan this QR code to connect automatically.'})]}),(0,r.jsx)(u.FA,{backgroundColor:"$green3",padding:"$3",borderRadius:"$3",width:"100%",maxWidth:500,borderWidth:1,borderColor:"$green6",children:(0,r.jsx)(g.x,{fontSize:"$2",color:"$green11",textAlign:"center",children:"This QR contains your connection credentials. Keep it private and don't share it."})})]})},eD=[{name:"Network Check",title:"Verify WiFi Connection"},{name:"Download App",title:"Download Vento Client"},{name:"Connect",title:"Connect Your Device"}];var eL=n(96120),eR=n(70425);let eT=e=>""!==e&&/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e),eN=e=>{let{data:t,setData:n,keys:i,setKeys:a,errorMessage:l=""}=e,[s,d]=(0,o.useState)("");return(0,r.jsx)(m.p,{maxHeight:"400px",children:(0,r.jsxs)(u.FA,{gap:"$4",padding:"$3",paddingBottom:"$4",children:[(0,r.jsxs)(u.FA,{gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:"Object Name"}),(0,r.jsx)(E.II,{value:(null==t?void 0:t.name)||"",onChangeText:e=>{eT(e)||""===e?d(""):d("Name must start with a letter and contain only letters, numbers or underscores"),n({...t,name:e})},placeholder:"MyObject",size:"$4"}),(0,r.jsx)(g.x,{height:"$1",fontSize:"$2",color:"$red8",children:s||l})]}),(0,r.jsxs)(u.FA,{gap:"$3",children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:"Fields"}),(0,r.jsx)(eR.i,{path:["keys"],value:i,setValue:a,mode:"add",formData:{...t,keys:i}})]})]})})};var e_=n(29804),eO=n(60166);let eV=[{id:"windows-amd64",name:"Windows (64-bit)",file:"ventoagent-windows-amd64.exe"},{id:"windows-arm64",name:"Windows (ARM64)",file:"ventoagent-windows-arm64.exe"},{id:"darwin-amd64",name:"macOS (Intel)",file:"ventoagent-darwin-amd64"},{id:"darwin-arm64",name:"macOS (Apple Silicon)",file:"ventoagent-darwin-arm64"},{id:"linux-amd64",name:"Linux (64-bit)",file:"ventoagent-linux-amd64"},{id:"linux-arm64",name:"Linux (ARM64)",file:"ventoagent-linux-arm64"},{id:"linux-armv7",name:"Linux (ARMv7)",file:"ventoagent-linux-armv7"}],eU=()=>{var e;if("undefined"==typeof navigator)return"windows-amd64";let t=navigator.userAgent.toLowerCase(),n=(null===(e=navigator.platform)||void 0===e?void 0:e.toLowerCase())||"",r="windows";t.includes("mac")||n.includes("mac")?r="darwin":(t.includes("linux")||n.includes("linux"))&&(r="linux");let o="amd64";t.includes("arm64")||t.includes("aarch64")?o="arm64":t.includes("arm")&&(o="armv7"),"darwin"===r&&(n.includes("arm")||t.includes("arm"))&&(o="arm64");let i="".concat(r,"-").concat(o);return eV.find(e=>e.id===i)?i:"windows-amd64"};var eM=n(37660);let eB=[{id:"linux-arm64",name:"Raspberry Pi 4 / 5 (64-bit)",file:"ventoagent-linux-arm64"},{id:"linux-armv7",name:"Raspberry Pi 2 / 3 (32-bit)",file:"ventoagent-linux-armv7"}],eq=()=>{if("undefined"==typeof navigator)return eB[0].id;let e=navigator.userAgent.toLowerCase();return e.includes("armv7")||e.includes("armv6")?"linux-armv7":"linux-arm64"},eZ={name:"Vento Go Agent for Raspberry Pi",description:"Install the precompiled ventoagent binary served by this Vento instance and link your Raspberry Pi as a device.",highlights:["Downloads the correct ARM binary directly from your current Vento server.","Includes a ready-to-run command with host, token, username, and device name.","Runs ventoagent in headless mode (-no-gui -no-tray) optimized for Raspberry Pi.","Device name is embedded so you can instantly recognize the Pi once it connects."],buildScript:e=>{let t=e.deviceName||"<DEVICE_NAME>",n=e.downloadUrl||"".concat(e.host,"/public/clients/desktop/ventoagent-linux-arm64");return["# Download and configure ventoagent (Go)","sudo apt update && sudo apt install -y curl","curl -fsSL ".concat(n," -o ventoagent"),"chmod +x ventoagent","# Run the agent with your current server credentials","sudo ./ventoagent -host ".concat(e.host," -token ").concat(e.token," -user ").concat(e.username," -device ").concat(t," -no-gui -no-tray")].join("\n")}},eH=e=>{let{label:t,value:n,icon:o}=e;return(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:600,children:[(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(o,{size:20,color:"var(--color9)"}),(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:t})]}),(0,r.jsx)(u.FA,{backgroundColor:"$gray3",padding:"$3",borderRadius:"$3",children:(0,r.jsx)(g.x,{fontSize:"$2",color:"$gray11",fontFamily:"$mono",whiteSpace:"pre-wrap",children:n})})]})},eK=[{id:"android",name:"Android Device",description:"Connect your Android phone as a network device",icon:"smartphone",category:"device",Component:e=>{let{onCreated:t,onBack:n}=e,i=(0,_.Py)(),[l]=(0,eP.kP)(),[s,d]=(0,o.useState)(!1),[c,h]=(0,o.useState)(""),[p,f]=(0,o.useState)(""),[v,j]=(0,o.useState)(!0),[y,$]=(0,o.useState)(null),[w,b]=(0,o.useState)(0),S=eD.length,C=eD[w],A=eD.filter((e,t)=>t<=w).map(e=>e.name).join(" / ");(0,o.useEffect)(()=>{(async()=>{var e,t,n;try{let n=await a.API.get("/api/core/v1/netaddr/vento");if(n.data&&n.data.apkUrl){if(h(n.data.apkUrl),$(n.data),(null==l?void 0:null===(e=l.user)||void 0===e?void 0:e.id)&&(null==l?void 0:l.token)&&n.data.baseUrl){let e=new URLSearchParams({host:n.data.baseUrl,user:l.user.id,token:l.token});f("vento://connect?".concat(e.toString()))}}else{let e=window.location.origin;if(h("".concat(e,"/public/clients/vento-client.apk")),(null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.id)&&(null==l?void 0:l.token)){let t=new URLSearchParams({host:e,user:l.user.id,token:l.token});f("vento://connect?".concat(t.toString()))}}}catch(e){console.error("Failed to get network address:",e);{let e=window.location.origin;if(h("".concat(e,"/public/clients/vento-client.apk")),(null==l?void 0:null===(n=l.user)||void 0===n?void 0:n.id)&&(null==l?void 0:l.token)){let t=new URLSearchParams({host:e,user:l.user.id,token:l.token});f("vento://connect?".concat(t.toString()))}}}finally{j(!1)}})()},[l]);let I=async()=>{let e=1===w?c:p;try{await navigator.clipboard.writeText(e),d(!0),i.show("Copied!",{message:1===w?"Download link copied":"Connection URL copied"}),setTimeout(()=>d(!1),2e3)}catch(e){i.show("Failed to copy",{message:"Please copy manually"})}};return(0,r.jsxs)(u.FA,{padding:"$3",paddingTop:"$0",width:"100%",maxWidth:800,maxHeight:"80vh",children:[(0,r.jsxs)(u.sL,{justifyContent:"space-between",width:"100%",children:[(0,r.jsx)(F.Kq,{flex:1,children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:A})}),(0,r.jsx)(F.Kq,{flex:1,alignItems:"flex-end",children:(0,r.jsxs)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:["[",w+1,"/",S,"]"]})})]}),(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:C.title})})}),(0,r.jsx)(m.p,{flex:1,marginTop:"$4",showsVerticalScrollIndicator:!0,children:(0,r.jsxs)(F.Kq,{paddingBottom:"$4",children:[0===w&&(0,r.jsx)(eE,{networkInfo:y,loading:v}),1===w&&(0,r.jsx)(eF,{apkUrl:c,networkInfo:y,loading:v,onCopy:I,copied:s}),2===w&&(0,r.jsx)(eW,{connectUrl:p,loading:v||!p,onCopy:I,copied:s})]})}),(0,r.jsxs)(u.sL,{gap:"$4",justifyContent:"center",marginTop:"$3",marginBottom:"$1",flexWrap:"wrap",children:[(0,r.jsx)(x.zx,{minWidth:200,flex:1,maxWidth:250,onPress:()=>{0===w&&n?n():w>0&&b(w-1)},children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{minWidth:200,flex:1,maxWidth:250,onPress:()=>{w<S-1?(b(w+1),d(!1)):null==t||t()},children:w===S-1?"Done":"Next"})})]})]})}},{id:"desktop",name:"Desktop Agent",description:"Download agent for Windows, macOS or Linux computers",icon:"monitor",category:"device",Component:e=>{let{onCreated:t,onBack:n}=e,i=(0,_.Py)(),[l,s]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!0),[h,p]=(0,o.useState)(""),[m,f]=(0,o.useState)(null),[v,j]=(0,o.useState)(eU()),y=eV.find(e=>e.id===v)||eV[0],$=h?"".concat(h,"/public/clients/desktop/").concat(y.file):"";(0,o.useEffect)(()=>{(async()=>{try{let e=await a.API.get("/api/core/v1/netaddr/vento");e.data&&e.data.baseUrl?(p(e.data.baseUrl),f(e.data)):p(window.location.origin)}catch(e){console.error("Failed to get network address:",e),p(window.location.origin)}finally{c(!1)}})()},[]);let w=async()=>{try{await navigator.clipboard.writeText($),s(!0),i.show("Copied!",{message:"Download URL copied to clipboard"}),setTimeout(()=>s(!1),2e3)}catch(e){i.show("Failed to copy",{message:"Please copy manually"})}};return d?(0,r.jsxs)(u.FA,{padding:"$3",paddingTop:"$0",width:700,flex:1,alignItems:"center",justifyContent:"center",gap:"$4",children:[(0,r.jsx)(G.$,{size:"large"}),(0,r.jsx)(g.x,{color:"$gray11",children:"Detecting network address..."})]}):(0,r.jsxs)(u.FA,{padding:"$3",paddingTop:"$0",width:700,flex:1,children:[(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{marginBottom:"$2",children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:"Download Desktop Agent"})})}),(0,r.jsx)(g.x,{marginBottom:"$6",fontSize:"$3",color:"$gray9",children:"Download the Vento agent for your computer. Copy the URL below and paste it in the browser of the target machine to download."}),(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$6",paddingVertical:"$4",flex:1,children:[(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:500,children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:"Select Platform"}),(0,r.jsxs)(e_.Ph,{value:v,onValueChange:j,size:"$4",children:[(0,r.jsx)(e_.Ph.Trigger,{iconAfter:eO._,children:(0,r.jsx)(e_.Ph.Value,{placeholder:"Select platform"})}),(0,r.jsxs)(e_.Ph.Content,{zIndex:2e5,children:[(0,r.jsx)(e_.Ph.ScrollUpButton,{}),(0,r.jsx)(e_.Ph.Viewport,{children:eV.map((e,t)=>(0,r.jsx)(e_.Ph.Item,{index:t,value:e.id,children:(0,r.jsx)(e_.Ph.ItemText,{children:e.name})},e.id))}),(0,r.jsx)(e_.Ph.ScrollDownButton,{})]})]})]}),(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:500,children:[(0,r.jsxs)(u.sL,{alignItems:"center",gap:"$2",children:[(0,r.jsx)(eS.U,{size:20,color:"var(--color9)"}),(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:"Download URL"})]}),(0,r.jsx)(u.FA,{backgroundColor:"$gray3",padding:"$3",borderRadius:"$3",width:"100%",children:(0,r.jsx)(g.x,{fontSize:"$2",color:"$gray11",fontFamily:"$mono",wordWrap:"break-word",children:$})}),(null==m?void 0:m.interface)&&(0,r.jsxs)(g.x,{fontSize:"$2",color:"$gray9",children:["Network: ",m.interface," (",m.ip,")"]})]}),(0,r.jsx)(x.zx,{size:"$4",onPress:w,icon:l?ew.J:e$.C,children:l?"Copied!":"Copy Download URL"}),(0,r.jsxs)(u.FA,{backgroundColor:"$blue3",padding:"$3",borderRadius:"$3",width:"100%",maxWidth:500,borderWidth:1,borderColor:"$blue6",gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",fontWeight:"600",color:"$blue11",children:"Instructions:"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$blue11",children:"1. Copy the URL above"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$blue11",children:"2. Open a browser on the target computer"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$blue11",children:"3. Paste the URL and download the agent"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$blue11",children:"4. Run the downloaded agent to connect"})]})]}),(0,r.jsxs)(u.sL,{gap:40,justifyContent:"center",marginTop:"$4",alignItems:"flex-end",children:[(0,r.jsx)(x.zx,{width:200,onPress:()=>{n&&n()},children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{width:200,onPress:()=>{null==t||t()},children:"Done"})})]})]})}},{id:"devices",name:"ESP32 Device",description:"Remote sensing and control using ESP32 based devices",icon:"cpu",category:"device",Component:e=>{let{onCreated:t,onBack:n}=e,i=(0,_.Py)(),[l,s]=(0,o.useState)({template:"__none__",name:""}),[d,c]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),[f,v]=(0,o.useState)((0,a.getPendingResult)("pending")),[j,y]=(0,o.useState)((0,a.getPendingResult)("pending")),[$,w]=(0,o.useState)(0),[b,S]=(0,o.useState)(null),[C,A]=(0,o.useState)(""),I=(0,o.useRef)(null),[k,P]=(0,o.useState)(null),[E,W]=(0,o.useState)(null),[D,L]=(0,o.useState)(!1),[R,T]=(0,o.useState)(null),{flashDevice:N,ui:O}=(0,ea.z)(),V=(0,ei.lM)(),U="__none__"===l.template,B=[{id:"basics",name:"Basics",title:"Device Basics"},{id:"template",name:"Template",title:"Select a Template (optional)"},...U?[{id:"board",name:"Board",title:"Select the board for your device"}]:[],...U?[{id:"edit-template",name:"Edit Template",title:"Edit your Device Template"}]:[],{id:"upload",name:"Upload",title:"Upload Firmware"}],q=B.length,Z=B[$],H=B.filter((e,t)=>t<=$).map(e=>e.name).join(" / ");(0,M.a)(e=>{a.API.get({url:"/api/core/v1/deviceDefinitions?all=1"},e)},v,void 0),(0,M.a)(e=>{a.API.get({url:"/api/core/v1/deviceboards?all=1"},e)},y,void 0),(0,o.useEffect)(()=>{if(!U){S(null),A("");return}if(null==j?void 0:j.isLoaded){var e,t;let n=null!==(t=null==j?void 0:null===(e=j.data)||void 0===e?void 0:e.items)&&void 0!==t?t:[];!b&&n.length&&S(n[0].name)}},[U,null==j?void 0:j.isLoaded]),(0,o.useEffect)(()=>{$>B.length-1&&w(B.length-1)},[B.length]);let K=(e,t,n)=>{var r,o,i,a,l,s;let d=['"mydevice"','"'.concat(b,'"')],c=(null==e?void 0:e.ports)||[],h='wifi("'.concat(t.ssid,'", "').concat(t.password,'", "none")'),u=n?'mqtt("'.concat(n,'")'):null,g=e=>"string"==typeof e?e.toLowerCase():"",p=e=>"io"===e||"i"===e||"o"===e,x=c.map((e,t)=>({idx:t,type:g(null==e?void 0:e.type)})).filter(e=>"virtual"===e.type).map(e=>e.idx),m=c.map((e,t)=>({idx:t,type:g(null==e?void 0:e.type)})).filter(e=>p(e.type)).map(e=>e.idx),f=(e,t)=>{for(let n of e)if(null===t||n!==t)return n;return null},v=(e,t)=>{for(let n of e)if(!t.includes(n))return n;return null},j=null!==(o=null!==(r=x[0])&&void 0!==r?r:m[0])&&void 0!==o?o:null,y=u&&null!==(a=null!==(i=f(x,j))&&void 0!==i?i:f(m,j))&&void 0!==a?a:null,$=null!==(s=null!==(l=v(x,[j,y]))&&void 0!==l?l:v(m,[j,y]))&&void 0!==s?s:null,w=Math.max(c.length,null!==j?j+1:0,null!==y?y+1:0,null!==$?$+1:0,2);for(let e=0;e<w;e++)e===j?d.push(h):e===y&&u?d.push(u):e===$?d.push("ota()"):d.push("null");return d.push("null"),"[\n  ".concat(d.join(",\n  "),"\n];")},G=async()=>{try{var e;let t=await a.API.get("/api/core/v1/netaddr/vento"),n=null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.baseUrl;if(n)return new URL(n).hostname}catch(e){}return"localhost"},J=async e=>{if(!b)return A("Please select a board"),!1;L(!0),c("");try{var t,n,r;let o="".concat(l.name,"_template"),[i,s]=await Promise.all([a.API.get("/api/core/v1/deviceboards/".concat(encodeURIComponent(b))),G()]);if((null==i?void 0:i.isError)||!(null==i?void 0:i.data))return A("Unable to load selected board"),L(!1),!1;let d=i.data,h={name:o,sdk:"esphome-idf",board:d,description:"ESPHome template for ".concat(l.name),config:{components:K(d,e,s),sdkConfig:null!==(n=null==d?void 0:null===(t=d.config)||void 0===t?void 0:t["esphome-idf"])&&void 0!==n?n:{}}},u=await a.API.post("/api/core/v1/devicedefinitions",h);if((null==u?void 0:u.isError)&&(u=await a.API.post("/api/core/v1/devicedefinitions/".concat(encodeURIComponent(o)),h)),null==u?void 0:u.isError){let e=(null==u?void 0:null===(r=u.error)||void 0===r?void 0:r.message)||(null==u?void 0:u.error)||"Error creating template";return c("string"==typeof e?e:"Error creating template"),L(!1),!1}return P(o),W(e),L(!1),!0}catch(e){return c((null==e?void 0:e.message)||"Error creating template"),L(!1),!1}},Y=async e=>{if(!E)return c("WiFi credentials not found"),!1;L(!0),c("");try{let t={name:l.name,platform:"esphome",credentials:{wifi:{ssid:E.ssid,password:E.password}},deviceDefinition:e},n=X.O7.load(t),r=await a.API.post(el,n.create().getData());if(r.isError)throw r.error;let o=await a.API.get("/api/core/v1/devices/".concat(encodeURIComponent(l.name)));return!o.isError&&o.data&&T(X.O7.load(o.data)),i.show("Device created",{message:l.name}),L(!1),!0}catch(e){return c((null==e?void 0:e.message)||"Error creating device"),L(!1),!1}},Q=async e=>{L(!0),c("");try{let t={name:l.name,platform:"esphome",credentials:{wifi:{ssid:e.ssid,password:e.password}},deviceDefinition:l.template},n=X.O7.load(t),r=await a.API.post(el,n.create().getData());if(r.isError)throw r.error;let o=await a.API.get("/api/core/v1/devices/".concat(encodeURIComponent(l.name)));return!o.isError&&o.data&&T(X.O7.load(o.data)),W(e),i.show("Device created",{message:l.name}),L(!1),!0}catch(e){return c((null==e?void 0:e.message)||"Error creating device"),L(!1),!1}},ee=(0,o.useRef)(!1),et=async()=>{if(k)try{await a.API.get("/api/core/v1/devicedefinitions/".concat(encodeURIComponent(k),"/delete"))}catch(e){}},en=async e=>{ee.current=!0,await Y(e)&&(V.closeEditor(),w(B.findIndex(e=>"upload"===e.id)))},eo=async()=>{if("basics"===Z.id){if(!em(l.name)){c("Name is required and must use only lowercase letters, numbers or underscores");return}c("");let e=null;if(I.current&&(e=await I.current.ensureSelection()),!e){p("Wi-Fi is required. Please select or add a network.");return}p(""),W(e),w($+1);return}if("template"===Z.id){if(U)w($+1);else{if(!E){c("WiFi credentials not found");return}if(!await Q(E))return;w(B.findIndex(e=>"upload"===e.id))}return}if("board"===Z.id){if(!b){A("Please select a board");return}if(A(""),!E){c("WiFi credentials not found");return}if(!await J(E))return;i.show("Template created",{message:"".concat(l.name,"_template")}),V.openDefinition("".concat(l.name,"_template")),w($+1);return}if("edit-template"!==Z.id){if("upload"===Z.id){t({name:l.name,wifi:E});return}$<q-1&&w($+1)}};return(0,r.jsxs)(u.FA,{id:"admin-dataview-create-dlg",padding:"$3",paddingTop:"$0",width:"edit-template"===Z.id?1200:800,flex:1,children:[(0,r.jsxs)(u.sL,{id:"admin-eo",justifyContent:"space-between",width:"100%",children:[(0,r.jsx)(F.Kq,{flex:1,children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:H})}),(0,r.jsx)(F.Kq,{flex:1,alignItems:"flex-end",children:(0,r.jsxs)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:["[",$+1,"/",q,"]"]})})]}),(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{children:Z.title&&(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:Z.title})})}),(0,r.jsxs)(F.Kq,{flex:1,marginTop:"$2",children:["basics"===Z.id&&(0,r.jsx)(m.p,{style:{width:"100%"},children:(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",children:[(0,r.jsx)(ef,{data:l,setData:s,errorMessage:d}),(0,r.jsx)(ey,{ref:I,active:"basics"===Z.id,wifiError:h,onClearError:()=>p("")})]})}),"template"===Z.id&&(0,r.jsx)(ep,{selected:l.template,setSelected:e=>s({...l,template:e}),definitions:f}),"board"===Z.id&&(0,r.jsx)(ex,{boards:j,selectedBoard:b,setSelectedBoard:e=>{S(e),A("")},error:C}),"edit-template"===Z.id&&(0,r.jsxs)(u.FA,{flex:1,alignItems:"center",justifyContent:"center",gap:"$3",children:[(0,r.jsx)(g.x,{color:"$gray10",children:"Edit your device template in the editor..."}),(0,r.jsx)(g.x,{color:"$gray9",fontSize:"$2",children:"Click Save (green button) when done, or X to cancel"})]}),"upload"===Z.id&&(0,r.jsxs)(u.FA,{flex:1,alignItems:"center",justifyContent:"center",padding:"$4",children:[O,(0,r.jsxs)(u.FA,{gap:"$4",alignItems:"center",padding:"$6",borderWidth:1,borderColor:"$color6",borderRadius:"$5",backgroundColor:"$bg",maxWidth:500,width:"100%",children:[(0,r.jsxs)(u.FA,{alignItems:"center",gap:"$2",children:[(0,r.jsxs)(g.x,{fontSize:"$7",fontWeight:"700",color:"$color11",children:['Device "',l.name,'" is ready!']}),(0,r.jsx)(g.x,{color:"$gray10",textAlign:"center",fontSize:"$4",children:"Click the button below to upload the firmware to your ESP32 device."})]}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{size:"$5",icon:er.W,onPress:()=>{R&&N(R)},marginTop:"$2",children:"Upload Firmware"})})]})]})]}),"edit-template"!==Z.id&&(0,r.jsxs)(u.sL,{gap:40,justifyContent:"center",marginBottom:"$1",alignItems:"flex-end",children:["upload"!==Z.id&&(0,r.jsx)(x.zx,{width:250,onPress:()=>{0===$&&n?n():$>0&&w($-1)},children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{id:"admin-devices-add-btn",width:250,onPress:eo,disabled:D||"basics"===Z.id&&!em(l.name)||"template"===Z.id&&!U&&!E,children:"template"===Z.id?D?"Creating...":U?"Next":"Create Device":"board"===Z.id?D?"Creating...":"Create Template":"upload"===Z.id?"Done":"Next"})})]}),(0,r.jsx)(ei.u,{...V.editorProps,onSaved:en,onClose:()=>{V.closeEditor(),ee.current||(et(),null==n||n()),ee.current=!1}})]})}},{id:"raspberrypi",name:"Raspberry Pi Agent",description:"Install the Raspberry Pi Python agent for GPIO control with a ready-made script",icon:"cpu",category:"device",Component:e=>{var t;let{onCreated:n,onBack:i}=e,l=(0,_.Py)(),[s]=(0,eP.kP)(),[d,c]=(0,o.useState)(!0),[h,p]=(0,o.useState)(""),[m,f]=(0,o.useState)(null),[v,j]=(0,o.useState)(!1),[y,$]=(0,o.useState)(""),[w,b]=(0,o.useState)(eq()),S=h||window.location.origin||"http://localhost:8000",C=(null==s?void 0:s.token)||"<VENTO_TOKEN>",A=(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id)||"<VENTO_USER>",I=eB.find(e=>e.id===w)||eB[0],k="".concat(S,"/public/clients/desktop/").concat(I.file),P=y.trim(),W=!!P&&/^[A-Za-z][A-Za-z0-9_]*$/.test(P),D=(0,o.useMemo)(()=>W?eZ.buildScript({host:S,token:C,username:A,deviceName:P,downloadUrl:k}):"",[eZ,S,C,A,P,W,k]);(0,o.useEffect)(()=>{(async()=>{try{let e=await a.API.get("/api/core/v1/netaddr/vento");e.data&&e.data.baseUrl?(p(e.data.baseUrl),f(e.data)):p(window.location.origin)}catch(e){console.error("Failed to get network address:",e),p(window.location.origin)}finally{c(!1)}})()},[]);let L=async()=>{if(D)try{await navigator.clipboard.writeText(D),j(!0),l.show("Copied!",{message:"Script copied to clipboard"}),setTimeout(()=>j(!1),2e3)}catch(e){l.show("Failed to copy",{message:"Unable to copy the script"})}};return d?(0,r.jsxs)(u.FA,{padding:"$3",paddingTop:"$0",width:700,flex:1,alignItems:"center",justifyContent:"center",gap:"$4",maxHeight:"80vh",children:[(0,r.jsx)(G.$,{size:"large"}),(0,r.jsx)(g.x,{color:"$gray11",children:"Detecting network address..."})]}):(0,r.jsxs)(u.FA,{padding:"$3",paddingTop:"$0",width:700,flex:1,maxHeight:"80vh",overflow:"auto",children:[(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{marginBottom:"$2",children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:"Set up your Raspberry Pi"})})}),(0,r.jsx)(g.x,{marginBottom:"$6",fontSize:"$3",color:"$gray9",children:"Provide a device name and copy the script to install the Python GPIO agent on your Raspberry Pi. The script already includes your server URL and current token."}),(0,r.jsxs)(u.FA,{gap:"$4",alignItems:"center",children:[(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:600,children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:"Device name"}),(0,r.jsx)(E.II,{value:y,onChangeText:$,placeholder:"LabPi_01"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$gray9",children:"Use letters, numbers or underscores. The name must start with a letter and is embedded in every command so the new device is easy to identify."}),y.length>0&&!W&&(0,r.jsx)(g.x,{fontSize:"$2",color:"$red10",children:"Device names must start with a letter and can only contain English letters, numbers, or underscores."})]}),(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:600,padding:"$3",borderRadius:"$4",borderWidth:1,borderColor:"$gray5",backgroundColor:"$gray2",children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:eZ.name}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$gray11",children:eZ.description})]}),(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:600,children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$gray11",children:"Architecture"}),(0,r.jsxs)(e_.Ph,{value:w,onValueChange:b,size:"$4",children:[(0,r.jsx)(e_.Ph.Trigger,{iconAfter:eO._,children:(0,r.jsx)(e_.Ph.Value,{placeholder:"Select architecture"})}),(0,r.jsxs)(e_.Ph.Content,{zIndex:2e5,children:[(0,r.jsx)(e_.Ph.ScrollUpButton,{}),(0,r.jsx)(e_.Ph.Viewport,{children:eB.map((e,t)=>(0,r.jsx)(e_.Ph.Item,{index:t,value:e.id,children:(0,r.jsx)(e_.Ph.ItemText,{children:e.name})},e.id))}),(0,r.jsx)(e_.Ph.ScrollDownButton,{})]})]})]}),(0,r.jsx)(eH,{label:"Download URL",value:k,icon:eS.U}),(null==m?void 0:m.interface)&&(0,r.jsxs)(g.x,{fontSize:"$2",color:"$gray9",children:["Detected network: ",m.interface," (",m.ip,")"]}),D?(0,r.jsx)(eH,{label:"Setup script",value:D,icon:eM.o}):(0,r.jsxs)(u.FA,{gap:"$2",width:"100%",maxWidth:600,padding:"$3",borderRadius:"$3",backgroundColor:"$yellow3",borderWidth:1,borderColor:"$yellow6",children:[(0,r.jsx)(g.x,{fontSize:"$4",fontWeight:"600",color:"$yellow11",children:"Device name required"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$yellow11",children:"Enter a valid device name to generate the script with the correct identifiers."})]}),(0,r.jsx)(x.zx,{size:"$4",disabled:!D,onPress:L,icon:v?ew.J:e$.C,children:v?"Copied!":"Copy script"}),(0,r.jsxs)(u.FA,{backgroundColor:"$blue3",padding:"$3",borderRadius:"$3",width:"100%",maxWidth:600,borderWidth:1,borderColor:"$blue6",gap:"$2",children:[(0,r.jsx)(g.x,{fontSize:"$3",fontWeight:"600",color:"$blue11",children:"What this script includes"}),eZ.highlights.map(e=>(0,r.jsxs)(g.x,{fontSize:"$2",color:"$blue11",children:["- ",e]},e))]})]}),(0,r.jsxs)(u.sL,{gap:40,justifyContent:"center",marginTop:"$4",alignItems:"flex-end",children:[(0,r.jsx)(x.zx,{width:200,onPress:()=>{i&&i()},children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{width:200,onPress:()=>{null==n||n()},children:"Done"})})]})]})}},{id:"objects",name:"Data Object",description:"Create a data object with fields and automatic storage",icon:"box",category:"storage",Component:e=>{let{onCreated:t,onBack:n}=e,i=(0,_.Py)(),l=(0,c.t)(),[s,d]=(0,o.useState)({name:""}),[h,p]=(0,o.useState)({name:{type:"string",modifiers:[{name:"id"}]}}),[m,f]=(0,o.useState)(""),[v,j]=(0,o.useState)(!1),y=async()=>{if(!eT(s.name)){f("Object name is required and must start with a letter");return}if(!h||0===Object.keys(h).length){f("Add at least one field to create the object");return}if(Object.keys(h||{}).filter(e=>!eT(e)).length>0){f("All field names must be valid (start with letter, only letters/numbers/underscores)");return}j(!0),f("");try{let e={name:s.name,keys:h,api:!0,databaseType:"Local Storage"},n=eL.Wk.load(e),r=await a.API.post("/api/core/v1/objects",n.create().getData());if(r.isError)throw r.error;i.show("Object created",{message:s.name}),t({name:s.name}),l.push("/objects?created=".concat(s.name))}catch(e){f((null==e?void 0:e.message)||"Error creating object")}finally{j(!1)}};return(0,r.jsxs)(u.FA,{id:"admin-dataview-create-dlg",padding:"$3",paddingTop:"$0",width:600,minHeight:500,flex:1,children:[(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{marginBottom:"$2",children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:"Create Object"})})}),(0,r.jsx)(g.x,{marginBottom:"$4",fontSize:"$3",color:"$gray9",children:"Define a data object with its fields. Objects are automatically stored and can be managed through the API."}),(0,r.jsx)(F.Kq,{flex:1,children:(0,r.jsx)(eN,{data:s,setData:d,keys:h,setKeys:p,errorMessage:m})}),(0,r.jsxs)(u.sL,{gap:40,justifyContent:"center",marginTop:"$4",alignItems:"flex-end",children:[(0,r.jsx)(x.zx,{width:200,onPress:()=>{n&&n()},disabled:v,children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{id:"admin-objects-add-btn",width:200,onPress:y,disabled:v,children:v?"Creating...":"Create Object"})})]})]})}},{id:"virtualagents",name:"Virtual Agent",description:"AI-powered agents with customizable templates",icon:"bot",category:"agent",Component:e=>{let{onCreated:t,onBack:n}=e,i=(0,c.t)(),[l,s]=(0,o.useState)({template:{id:"ai agent"},name:""}),[d,h]=(0,o.useState)(0),p=N.length,m=N[d],f=N.filter((e,t)=>t<=d).map(e=>e.name).join(" / "),v=async()=>{if(d<p-1)h(d+1);else{let e=l.name;if(!R(e))return;let n=l.template;await a.API.post("/api/core/v1/import/board",{name:e,template:n}),t({name:e,template:n}),window!==window.parent?(0,W.Al)({type:"open-tab",name:e,tabType:"board"}):i.push("/boards/view?board=".concat(e))}};return(0,r.jsxs)(u.FA,{id:"admin-dataview-create-dlg",padding:"$3",paddingTop:"$0",width:800,flex:1,children:[(0,r.jsxs)(u.sL,{id:"admin-eo",justifyContent:"space-between",width:"100%",children:[(0,r.jsx)(F.Kq,{flex:1,children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:f})}),(0,r.jsx)(F.Kq,{flex:1,alignItems:"flex-end",children:(0,r.jsxs)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:["[",d+1,"/",p,"]"]})})]}),(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{children:m.title&&(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:m.title})})}),(0,r.jsxs)(F.Kq,{flex:1,marginTop:"$2",children:[0===d&&(0,r.jsx)(L,{selected:null==l?void 0:l.template,setSelected:e=>s({...l,template:e})}),1===d&&(0,r.jsx)(T,{selected:l,setName:e=>s({...l,name:e})})]}),(0,r.jsxs)(u.sL,{gap:40,justifyContent:"center",marginBottom:"$1",alignItems:"flex-end",children:[(0,r.jsx)(x.zx,{width:250,onPress:()=>{0===d&&n?n():d>0&&h(d-1)},children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{id:"admin-virtual-agents-add-btn",width:250,onPress:v,children:d===p-1?"Create":"Next"})})]})]})}},{id:"tasks",name:"Task",description:"Complex tasks with full programming environment",icon:"list-checks",category:"agent",Component:e=>{var t,n,i,l;let{onCreated:s,onBack:d}=e,c=(0,_.Py)(),[h,p]=(0,o.useState)({data:{template:B}}),[m,f]=(0,o.useState)(""),[v,j]=(0,o.useState)((0,a.getPendingResult)("pending")),[y,$]=(0,o.useState)(0),w=(null==h?void 0:null===(t=h.data)||void 0===t?void 0:t.template)&&O.e[h.data.template]?h.data.template:B,b=q(null==h?void 0:null===(n=h.data)||void 0===n?void 0:n.template),S=[{name:"Select Template",title:"Select your Template"},{name:null!==(l=null==b?void 0:b.name)&&void 0!==l?l:"Configure",title:"Configure your Task"}],C=S.length,A=S[y],I=S.filter((e,t)=>t<=y).map(e=>e.name).join(" / ");(0,o.useEffect)(()=>{var e;let t=null==h?void 0:null===(e=h.data)||void 0===e?void 0:e.template;t&&O.e[t]||p(e=>({...e,data:{...e.data,template:w}}))},[null==h?void 0:null===(i=h.data)||void 0===i?void 0:i.template,w]),(0,M.a)(e=>{a.API.get({url:"/api/core/v1/objects?all=1"},e)},j,void 0);let k=async()=>{if(y<C-1)$(y+1);else try{let e={...h,data:{...h.data,template:w}},t=V.h.load(e.data);if(null==b?void 0:b.extraValidation){let t=b.extraValidation(e.data);if(null==t?void 0:t.error)throw t.error}let n=await a.API.post("/api/core/v1/apis",t.create().getData());if(n.isError)throw n.error;c.show("Task created",{message:t.getId()}),s({name:t.getId()})}catch(e){f((0,a.getPendingResult)("error",null,e instanceof a.z.ZodError?e.flatten():e))}};return(0,r.jsxs)(u.FA,{id:"admin-dataview-create-dlg",padding:"$3",paddingTop:"$0",width:800,flex:1,children:[(0,r.jsxs)(u.sL,{id:"admin-eo",justifyContent:"space-between",width:"100%",children:[(0,r.jsx)(F.Kq,{flex:1,children:(0,r.jsx)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:I})}),(0,r.jsx)(F.Kq,{flex:1,alignItems:"flex-end",children:(0,r.jsxs)(g.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:["[",y+1,"/",C,"]"]})})]}),(0,r.jsx)(z.I,{children:(0,r.jsx)(F.Kq,{children:A.title&&(0,r.jsx)(g.x,{fontWeight:"500",fontSize:30,color:"$color",children:A.title})})}),(0,r.jsxs)(F.Kq,{flex:1,marginTop:"$2",children:[0===y&&(0,r.jsx)(H,{selected:w,setSelected:e=>p({...h,data:{...h.data,template:e}})}),1===y&&(0,r.jsx)(K,{error:m,objects:v,setError:f,data:h,setData:p,template:b})]}),(0,r.jsxs)(u.sL,{gap:40,justifyContent:"center",marginBottom:"$1",alignItems:"flex-end",children:[(0,r.jsx)(x.zx,{width:250,onPress:()=>{0===y&&d?d():y>0&&$(y-1)},children:"Back"}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{id:"admin-tasks-add-btn",width:250,onPress:k,children:y===C-1?"Create":"Next"})})]})]})}}];var eG=n(40826),eJ=n(70155),eX=n(79564);let eY=()=>{let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null),s=(0,o.useRef)(new Map),d=(0,o.useRef)(new Map),{onMessage:c}=(0,eX.Z)(["notifications/event/create/actions/boards/+/+/run","notifications/event/create/actions/boards/+/+/done","notifications/event/create/actions/boards/+/+/error","notifications/event/create/actions/boards/+/+/cancelled"]),h=(0,o.useCallback)(async()=>{try{var e;l(null);let n=await a.API.get("/api/core/v1/boards?all=true");if(n.isError){l(n.error||"Error loading boards");return}let r=Array.isArray(null===(e=n.data)||void 0===e?void 0:e.items)?n.data.items:[];t(r.map(e=>{let t=s.current.get(e.name),n=t&&t.size>0;return{...e,running:e.running||n}}))}catch(e){console.error("Error fetching boards:",e),l("Error loading boards")}finally{r(!1)}},[]);return(0,o.useEffect)(()=>{let e=null==c?void 0:c(e=>{try{let n=e.topic.split("/"),r=n.indexOf("boards");if(-1===r||r+1>=n.length)return;let o=n[r+1],i=JSON.parse(e.message),a=(null==i?void 0:i.payload)||i,l=null==a?void 0:a.status,c=null==a?void 0:a.executionId;if(e.topic.endsWith("/run")&&"running"===l&&c){let e=d.current.get(o);e&&(clearTimeout(e),d.current.delete(o)),s.current.has(o)||s.current.set(o,new Set),s.current.get(o).add(c),t(e=>e.map(e=>e.name===o?{...e,running:!0}:e))}else if(e.topic.endsWith("/done")||e.topic.endsWith("/error")||e.topic.endsWith("/cancelled")){c&&s.current.has(o)&&s.current.get(o).delete(c);let e=s.current.get(o);if(!(e&&e.size>0)){let e=d.current.get(o);e&&clearTimeout(e);let n=setTimeout(()=>{let e=s.current.get(o);e&&e.size>0||t(e=>e.map(e=>e.name===o?{...e,running:!1}:e)),d.current.delete(o)},1e3);d.current.set(o,n)}}}catch(e){}});return()=>null==e?void 0:e()},[c]),(0,o.useEffect)(()=>()=>{d.current.forEach(e=>clearTimeout(e)),d.current.clear()},[]),(0,o.useEffect)(()=>{h()},[h]),(0,eJ.uF)(()=>{h()},{path:"boards/create/#"}),(0,eJ.uF)(()=>{h()},{path:"boards/delete/#"}),{boards:e,loading:n,error:i,reload:h}};var eQ=n(16399),e0=n(91477),e1=n(66270);n(76977);var e2=n(52146),e4=n(19653),e3=n(20176);let e5={VENTO_NODE_SIZE:{width:100,height:100},VENTO_NODE_BORDER:"$4",DEVICE_NODE_SIZE:{width:260,height:140},MIN_RADIUS:350,NODE_SPACING:40},e6=e=>{if(e<=1)return e5.MIN_RADIUS;let t=e5.DEVICE_NODE_SIZE.width+e5.NODE_SPACING;return Math.max(e5.MIN_RADIUS,t*e/(2*Math.PI))};function e9(e,t,n,r,o,i){let a=e+n/2,l=t+r/2,s={x:e+n,y:l},d={x:a,y:t+r},c=Math.sqrt(e**2+l**2),h=Math.sqrt(s.x**2+s.y**2),u=Math.sqrt(a**2+t**2),g=Math.min(c,h,u,Math.sqrt(d.x**2+d.y**2));return g===c?{x:e,y:l,position:e0.Ly.Left}:g===h?{x:e+n,y:l,position:e0.Ly.Right}:g===u?{x:a,y:t,position:e0.Ly.Top}:{x:a,y:t+r,position:e0.Ly.Bottom}}let e7=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return Math.abs(t)},e8=(0,o.memo)(e=>{let{id:t,source:n,target:i,data:a,style:l}=e,s=(0,e1.ZP)(n),d=(0,e1.ZP)(i),c=(null==a?void 0:a.connected)===!0,h=(null==a?void 0:a.running)===!0,u=(null==a?void 0:a.isPending)===!0,g=(0,o.useMemo)(()=>{let e=e7(t);return-(e%1e3/1e3)*(2.5+e%1500/1e3)},[t]);if(!s||!d)return null;let{sx:p,sy:x,tx:m,ty:f,sourcePos:v,targetPos:j}=function(e,t,n,r){let o,i,a,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=e.internals.positionAbsolute,d=t.internals.positionAbsolute,c=s.x+n.width/2,h=s.y+n.height/2,u=d.x+r.width/2,g=d.y+r.height/2,p=Math.atan2(g-h,u-c);if(l){let e=n.width/2;o=c+Math.cos(p)*e,i=h+Math.sin(p)*e;let t=180*p/Math.PI;a=t>=-45&&t<45?e0.Ly.Right:t>=45&&t<135?e0.Ly.Bottom:t>=-135&&t<-45?e0.Ly.Top:e0.Ly.Left}else{let e=e9(s.x,s.y,n.width,n.height,u,g);o=e.x,i=e.y,a=e.position}let x=e9(d.x,d.y,r.width,r.height,c,h);return{sx:o,sy:i,tx:x.x,ty:x.y,sourcePos:a,targetPos:x.position}}(s,d,e5.VENTO_NODE_SIZE,e5.DEVICE_NODE_SIZE,!0),[y]=(0,e0.OW)({sourceX:p,sourceY:x,sourcePosition:v,targetX:m,targetY:f,targetPosition:j,borderRadius:20});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{id:t,d:y,stroke:u?"var(--orange9)":c?"var(--color9)":"var(--gray9)",strokeWidth:2,strokeDasharray:"6 4",fill:"none",style:{filter:c?"drop-shadow(0 0 3px var(--color9))":void 0,...l}}),h&&(0,r.jsx)("circle",{r:"3",fill:"var(--color9)",children:(0,r.jsx)("animateMotion",{dur:"3s",begin:"".concat(g,"s"),repeatCount:"indefinite",path:y,keyPoints:"0;1;0",keyTimes:"0;0.5;1",calcMode:"linear"})})]})}),te={vento:(0,o.memo)(e=>{let{data:t}=e,n=(0,e2.C)(),o=null==n?void 0:n.startsWith("dark");return(0,r.jsxs)(u.FA,{width:e5.VENTO_NODE_SIZE.width,height:e5.VENTO_NODE_SIZE.height,br:e5.VENTO_NODE_BORDER,cursor:"grab",ai:"center",jc:"center",style:{background:"linear-gradient(145deg, var(--color3), var(--color2))",boxShadow:"0 0 40px rgba(var(--color9-rgb), 0.3), inset 0 1px 0 rgba(255,255,255,0.1)",border:"3px solid var(--color8)"},children:[(0,r.jsx)(u.FA,{position:"absolute",top:-8,right:-8,bg:"$color9",br:"$10",px:"$2",py:"$1",children:(0,r.jsx)(g.x,{fontSize:9,fontWeight:"700",color:"white",children:"ONLINE"})}),(0,r.jsx)(e4.E,{src:"/public/vento-square.png",alt:"Vento",width:"$5",height:"$5",style:{filter:o?"invert(70%) brightness(10)":"invert(5%)",objectFit:"contain"}}),(0,r.jsx)(e1.HH,{type:"source",position:e0.Ly.Right,id:"source",style:{opacity:0,pointerEvents:"none"}})]})}),device:(0,o.memo)(e=>{let{data:t,selected:n}=e,o=!0===t.connected,i=!0===t.isPending,a=!0===t.running;return(0,r.jsx)(e3.tY,{board:t.originalData,platform:t.type,isConnected:o,isPending:i,isRunning:a,isHidden:t.isHidden,selected:n,mode:"node",handlePosition:t.handlePosition,onDelete:t.onDelete,onApprove:t.onApprove,onReject:t.onReject})}),add:(0,o.memo)(e=>{let{data:t}=e,n="devices"===t.filterType?"Add Device to Network":"storages"===t.filterType?"Add Storage to Network":"Add Element to Network";return(0,r.jsxs)(u.FA,{width:e5.DEVICE_NODE_SIZE.width,padding:"$3",height:e5.DEVICE_NODE_SIZE.height,br:"$4",cursor:"pointer",ai:"center",jc:"center",gap:"$2",style:{backgroundColor:"var(--bgContent)",border:"2px dashed var(--gray9)"},hoverStyle:{scale:1.01,boxShadow:"0 0 20px var(--gray5)"},pressStyle:{scale:.98},children:[(0,r.jsx)(b.v,{size:30,color:"$color11",strokeWidth:2}),(0,r.jsx)(g.x,{fontSize:"$4",color:"$color11",children:n}),(0,r.jsx)(e1.HH,{type:"target",position:t.handlePosition||e0.Ly.Left,id:"target",style:{opacity:0,pointerEvents:"none"}})]})})},tt={floating:e8},tn=e=>e>=-45&&e<45?e0.Ly.Left:e>=45&&e<135?e0.Ly.Top:e>=135||e<-135?e0.Ly.Right:e0.Ly.Bottom,tr=(0,o.memo)(e=>{let{onNodeClick:t,onAddClick:n,onDeleteNode:i,showAll:l=!1,filterType:s}=e,{boards:d,loading:c}=eY(),[h,g]=(0,o.useState)([]),[p,x]=(0,o.useState)([]),[m,f]=(0,o.useState)({}),[v,j]=(0,o.useState)(!0),{resolvedTheme:y}=(0,eQ.P)();(0,o.useEffect)(()=>{let e=async()=>{try{var e,t;let[n,r]=await Promise.all([a.API.get("/api/core/v1/devices?all=true"),a.API.get("/api/core/v1/objects?all=true")]);if(!r.isError&&(null===(e=r.data)||void 0===e?void 0:e.items)&&x(r.data.items),!n.isError&&(null===(t=n.data)||void 0===t?void 0:t.items)){g(n.data.items);let e={};for(let t of n.data.items)try{let n=await a.API.get("/api/core/v1/protomemdb/states/devices/".concat(t.name));!n.isError&&n.data&&(e[t.name]=n.data)}catch(e){}f(e)}}catch(e){console.error("Error fetching network data:",e)}finally{j(!1)}};e();let t=setInterval(e,1e4);return()=>clearInterval(t)},[]);let $=(0,o.useCallback)(e=>{let t=m[e];return t&&Object.keys(t).length>0},[m]),w=(0,o.useCallback)(async e=>{(null==e?void 0:e.name)&&(g(t=>t.filter(t=>t.name!==e.name)),i&&await i(e))},[i]),b=(0,o.useCallback)(async e=>{try{console.log("Approving enrollment for:",e.name);let n=await a.API.post("/api/core/v1/devices/enrollments/".concat(e.name,"/approve"),{});if(console.log("Approval result:",n),n.isError){var t;console.error("Error approving enrollment:",n.error),alert("Failed to approve enrollment: ".concat((null===(t=n.error)||void 0===t?void 0:t.message)||"Unknown error"));return}let r=await a.API.get("/api/core/v1/devices?all=true");r.isError||(g(r.data.items),console.log("Devices refreshed after approval"))}catch(e){console.error("Error approving enrollment:",e),alert("Failed to approve enrollment: ".concat(e))}},[]),S=(0,o.useCallback)(async e=>{try{console.log("Rejecting enrollment for:",e.name);let n=await a.API.post("/api/core/v1/devices/enrollments/".concat(e.name,"/reject"),{});if(console.log("Rejection result:",n),n.isError){var t;console.error("Error rejecting enrollment:",n.error),alert("Failed to reject enrollment: ".concat((null===(t=n.error)||void 0===t?void 0:t.message)||"Unknown error"));return}let r=await a.API.get("/api/core/v1/devices?all=true");r.isError||(g(r.data.items),console.log("Devices refreshed after rejection"))}catch(e){console.error("Error rejecting enrollment:",e),alert("Failed to reject enrollment: ".concat(e))}},[]),{nodes:C,edges:A}=(0,o.useMemo)(()=>{let e=[],t=[];e.push({id:"vento-hub",type:"vento",position:{x:-e5.VENTO_NODE_SIZE.width/2,y:-e5.VENTO_NODE_SIZE.height/2},data:{label:"Vento"},draggable:!1});let r=[],o=[];d.forEach(e=>{!h.some(t=>t.name===e.name||"".concat(t.name,"_device")===e.name)&&"devices"!==s&&"storages"!==s&&((0,eG.s)(e,"agents")?r.push(e):l&&o.push(e))});let i=[..."storages"===s?[]:h.map(e=>{var t,n;let r=(null===(n=e.data)||void 0===n?void 0:null===(t=n.enrollment)||void 0===t?void 0:t.status)==="pending",o=!r&&!0===$(e.name);return{id:"device-".concat(e.name),name:e.name,type:"device",platform:e.platform,connected:o,isPending:r,isHidden:!1,originalData:e}}),..."storages"===s?p.map(e=>({id:"object-".concat(e.name),name:e.name,type:"object",platform:"storage",connected:!0,isPending:!1,isHidden:!1,originalData:e})):[],...r.map(e=>({id:"board-".concat(e.name),name:e.name,type:"board",platform:"virtual",connected:!0,running:e.running||!1,isPending:!1,isHidden:!1,originalData:e})),...o.map(e=>({id:"board-".concat(e.name),name:e.name,type:"board",platform:"virtual",connected:!0,running:e.running||!1,isPending:!1,isHidden:!0,originalData:e}))],a=1===i.length&&1===h.length&&("desktop"===h[0].platform||"computer"===h[0].name);n&&(0===i.length||a)&&i.unshift({id:"add-node",name:"add",type:"add",platform:"add",connected:!1,isPending:!1,isHidden:!1,originalData:null});let c=i.length;if(0===c)return{nodes:e,edges:t};let u=e6(c),g=2*Math.PI/c,x=-Math.PI/2;return i.forEach((n,r)=>{let o=x+r*g,i=Math.cos(o)*u-e5.DEVICE_NODE_SIZE.width/2,a=Math.sin(o)*u-e5.DEVICE_NODE_SIZE.height/2,l=tn(180*o/Math.PI),d="add"===n.type?"add":"device";e.push({id:n.id,type:d,position:{x:i,y:a},data:{label:n.name,type:n.platform,connected:n.connected,running:n.running||!1,isPending:n.isPending,isHidden:n.isHidden,icon:(0,e3.TX)(n.platform),handlePosition:l,originalData:n.originalData,onDelete:n.originalData?()=>w(n.originalData):void 0,onApprove:n.isPending?()=>b(n.originalData):void 0,onReject:n.isPending?()=>S(n.originalData):void 0,filterType:s}}),t.push({id:"edge-".concat(n.id),source:"vento-hub",target:n.id,type:"floating",data:{connected:n.connected,running:n.running||!1,isPending:n.isPending}})}),{nodes:e,edges:t}},[d,h,p,$,l,s,w,b,S]),[I,k,P]=(0,e1.Rr)([]),[E,F]=(0,e1.ll)([]);(0,o.useEffect)(()=>{(C.length>0||!v)&&k(C)},[C,v,k]),(0,o.useEffect)(()=>{(A.length>0||!v)&&F(A)},[A,v,F]);let W=(0,o.useCallback)((e,r)=>{"add-node"===r.id&&n?n():"vento-hub"!==r.id&&t&&t(r.data)},[t,n]),D=(0,o.useMemo)(()=>"network-flow-".concat(I.length,"-").concat(E.length),[I.length,E.length]);return v||c?(0,r.jsx)(u.FA,{f:1,ai:"center",jc:"center",children:(0,r.jsx)(z.I,{children:(0,r.jsx)(G.$,{color:"$color8",size:75})})}):(0,r.jsx)(z.I,{children:(0,r.jsx)("div",{style:{width:"100%",height:"100%",minHeight:"500px"},children:(0,r.jsx)(e1.x$,{nodes:I,edges:E,nodeTypes:te,edgeTypes:tt,onNodesChange:P,onNodeClick:W,minZoom:.2,maxZoom:1.5,fitView:!0,fitViewOptions:{padding:.2,minZoom:.5,maxZoom:1},proOptions:{hideAttribution:!0},nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!0,zoomOnScroll:!0,zoomOnPinch:!0,panOnDrag:!0,children:(0,r.jsx)(e1.Aq,{gap:30})},D)})})}),to="https://www.youtube.com/embed/".concat("ylzPcIOw7-4","?autoplay=1&rel=0"),ti=e=>{let{open:t,onClose:n,showDontShowAgain:o=!1,onDontShowAgain:i}=e;return(0,r.jsx)(v.a,{open:t,setOpen:e=>!e&&n(),title:"Welcome to Vento!",description:"Watch this quick tutorial to get started",hideAccept:!0,showCancel:!0,cancelCaption:"Close",onCancel:n,maxWidth:900,width:"95%",children:(0,r.jsxs)(u.FA,{width:"100%",gap:"$4",py:"$2",children:[(0,r.jsx)(z.I,{children:(0,r.jsx)(u.FA,{width:"100%",borderRadius:"$4",overflow:"hidden",backgroundColor:"$gray1",style:{aspectRatio:"16/9"},children:t&&(0,r.jsx)("iframe",{width:"100%",height:"100%",src:to,title:"Vento Tutorial",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,style:{border:"none",borderRadius:"inherit"}})})}),o&&i&&(0,r.jsx)(u.sL,{justifyContent:"center",mt:"$2",children:(0,r.jsx)(x.zx,{chromeless:!0,size:"$3",opacity:.7,hoverStyle:{opacity:1},onPress:()=>{i(),n()},children:(0,r.jsx)(g.x,{fontSize:"$2",color:"$color10",children:"Don't show this again"})})})]})})};var ta=n(19940);let{useParams:tl}=(0,h.X)(),ts=e=>{let{children:t}=e;return(0,r.jsx)(u.sL,{jc:"flex-start",ai:"flex-start",gap:25,flexWrap:"wrap",width:"100%",maxWidth:760,mx:"auto",children:t})},td=[{id:void 0,label:"All",icon:S.r},{id:"devices",label:"Devices",icon:I.x},{id:"storages",label:"Storages",icon:k.x}],tc=e=>{let{onCreateClick:t}=e;return(0,r.jsxs)(u.FA,{f:1,ai:"center",jc:"center",py:"$10",gap:"$6",mt:"$8",children:[(0,r.jsxs)(u.FA,{position:"relative",ai:"center",jc:"center",children:[(0,r.jsx)(u.FA,{position:"absolute",width:120,height:120,br:60,opacity:.2,bg:"$color9",style:{filter:"blur(40px)"}}),(0,r.jsx)(z.I,{children:(0,r.jsx)(S.r,{size:72,color:"$color9",strokeWidth:1.2})})]}),(0,r.jsxs)(u.FA,{ai:"center",gap:"$2",maw:400,children:[(0,r.jsx)(g.x,{fontSize:"$8",fontWeight:"700",color:"$color12",ta:"center",fontFamily:"$heading",children:"No agents yet"}),(0,r.jsx)(p.n,{size:"$4",color:"$color10",ta:"center",lh:"$5",children:"Create your first AI agent to automate tasks, connect devices, and build intelligent workflows."})]}),(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{size:"$5",icon:b.v,onPress:t,children:"Create your first agent"})}),(0,r.jsxs)(u.sL,{ai:"center",gap:"$2",opacity:.5,children:[(0,r.jsx)(C.P,{size:14,color:"$color9"}),(0,r.jsx)(g.x,{fontSize:"$2",color:"$color9",children:"Agents can control devices, process data, and respond to events"})]})]})},th=[{id:void 0,label:"All",icon:S.r,category:void 0},{id:"devices",label:"Devices",icon:I.x,category:"device"},{id:"storages",label:"Storages",icon:k.x,category:"storage"}],tu=e=>{let{selected:t,setSelected:n,categoryFilter:o,setCategoryFilter:i}=e,a=o?eK.filter(e=>e.category===o):eK;return(0,r.jsxs)(u.FA,{children:[(0,r.jsx)(u.sL,{gap:"$1",mb:"$4",jc:"center",children:th.map(e=>{var t;let n=o===e.category,a=e.icon;return(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{size:"$2",chromeless:!n,backgroundColor:n?"$color5":"transparent",borderRadius:"$2",paddingHorizontal:"$3",icon:(0,r.jsx)(a,{size:14,color:n?"$color11":"$gray9"}),onPress:()=>i(e.category),pressStyle:{opacity:.8},children:(0,r.jsx)(g.x,{fontSize:12,fontWeight:n?"600":"400",color:n?"$color11":"$gray10",children:e.label})})},null!==(t=e.id)&&void 0!==t?t:"all")})}),(0,r.jsx)(m.p,{mah:"500px",children:(0,r.jsx)(ts,{children:a.map(e=>(0,r.jsx)(y.w,{template:e,isSelected:(null==t?void 0:t.id)===e.id,onPress:()=>n(e)},e.id))})}),(0,r.jsx)(f.LZ,{marginBottom:"$8"})]})};var tg=e=>{let{workspace:t,pageState:n,initialItems:h,itemData:p,pageSession:m,extraData:f}=e,y=(0,c.t)(),{push:b,query:S}=(0,P.N)({}),[C,I]=o.useState(!1),[k,E]=(0,o.useState)(!1),[F,D]=(0,o.useState)(eK[0]||null),[L,R]=(0,o.useState)("select"),[T,N]=(0,o.useState)(void 0),_=(0,ta.Tg)("boards.create"),O=(0,ta.Tg)("boards.delete"),V=(0,o.useCallback)(e=>{I(!1),R("select")},[]),U=(0,o.useCallback)(e=>{I(e),e||R("select")},[]),M=window!==window.parent,B=(0,o.useCallback)(e=>{M?(0,W.Al)({type:"open-tab",name:e,tabType:"board"}):y.push("/boards/view?board=".concat(e))},[y,M]),q=(0,o.useCallback)(e=>{var t;(null==e?void 0:null===(t=e.originalData)||void 0===t?void 0:t.name)&&B(e.originalData.name)},[B]),Z=(0,o.useCallback)(()=>{let e="devices"===S.type?"device":"storages"===S.type?"storage":void 0;N(e),D((e?eK.filter(t=>t.category===e):eK)[0]||null),I(!0)},[S.type]),H=(0,o.useCallback)(async e=>{(null==e?void 0:e.name)&&(await a.API.get("/api/core/v1/boards/".concat(e.name,"/delete")),M&&(0,W.Al)({type:"close-tab",name:e.name,tabType:"board"}))},[M]),K=(0,o.useMemo)(()=>[{name:"topology",icon:A.Z,component:()=>(0,r.jsx)(tr,{showAll:"true"===S.all,filterType:S.type,onNodeClick:q,onAddClick:_?Z:void 0,onDeleteNode:O?H:void 0})}],[S.all,S.type,q,Z,H,_,O]),G=(0,o.useMemo)(()=>(0,r.jsx)(u.sL,{gap:"$1",mr:"$4",children:td.map(e=>{var t;let n=S.type===e.id,o=e.icon;return(0,r.jsx)(z.I,{children:(0,r.jsx)(x.zx,{size:"$2",chromeless:!n,backgroundColor:n?"$color5":"transparent",borderRadius:"$2",paddingHorizontal:"$2",icon:(0,r.jsx)(o,{size:14,color:n?"$color11":"$gray9"}),onPress:()=>{var t;return b("type",null!==(t=e.id)&&void 0!==t?t:"")},pressStyle:{opacity:.8},children:(0,r.jsx)(g.x,{fontSize:12,fontWeight:n?"600":"400",color:n?"$color11":"$gray10",children:e.label})})},null!==(t=e.id)&&void 0!==t?t:"agents")})}),[S.type,b]),J=(0,o.useMemo)(()=>[(0,r.jsx)(z.I,{children:(0,r.jsx)(s.N,{id:"admin-dataview-add-btn",icon:"true"===S.all?w._:$.b,description:"true"===S.all?"Show only boards visible in this view":"Show boards from all views",onPress:()=>{b("all","true"===S.all?"false":"true")}})},"toggle-visibility-scope")],[S.all,b]),X=(0,o.useMemo)(()=>({emptyMessage:_?(0,r.jsx)(tc,{onCreateClick:()=>I(!0)}):null,itemsTransform:e=>{let t=Array.isArray(e)?[...e]:[];return"devices"===S.type?t.filter(e=>e.platform&&"virtual"!==e.platform):"storages"===S.type?[]:"true"!==S.all?t.filter(e=>(0,eG.s)(e,"agents")):t},getCard:(e,t)=>(0,r.jsx)(e3.tY,{showNavIcons:!0,board:e,platform:e.platform||"virtual",mode:"card",width:t,onPress:()=>B(e.name),onDelete:O?async()=>{await a.API.get("/api/core/v1/boards/".concat(e.name,"/delete")),M&&(0,W.Al)({type:"close-tab",name:e.name,tabType:"board"})}:void 0})}),[S.all,S.type,B,M,O,_]),Y="devices"===S.type?"Network > Devices":"storages"===S.type?"Network > Storages":"Network",Q="devices"===S.type?"Network Devices":"storages"===S.type?"Network Storages":"Network";return(0,r.jsxs)(d.D,{title:Y,workspace:t,pageSession:m,children:[(0,r.jsx)(ti,{open:k,onClose:()=>E(!1)}),(0,r.jsx)(v.a,{p:"$2",pt:"$5",pl:"$5",setOpen:U,open:C,hideAccept:!0,description:"",children:(0,r.jsx)(u.FA,{f:1,jc:"center",ai:"center",children:(0,r.jsxs)(u.sL,{mr:"$5",children:[(0,r.jsx)(u.FA,{display:"select"===L?"flex":"none",children:(0,r.jsx)(j.M,{lastButtonCaption:"Next",id:"network-categories",onFinish:()=>{R("configure")},slides:[{name:"Add Network Element",title:"",component:(0,r.jsx)(tu,{selected:F,setSelected:D,categoryFilter:T,setCategoryFilter:N})}]})}),(0,r.jsx)(u.FA,{display:"configure"===L?"flex":"none",children:F&&(0,r.jsx)(F.Component,{onCreated:V,onBack:()=>R("select")})})]})})}),(0,r.jsx)(s.V,{entityName:Q,itemData:p,sourceUrl:"/api/core/v1/boards",sourceUrlParams:S,hideDeleteAll:!0,extraViews:K,extraActions:J,paginationLeft:G,extraFilters:[{queryParam:"all"},{queryParam:"type"}],contentPadding:"$1",initialItems:h,numColumnsForm:1,disableItemSelection:!0,onAdd:e=>(B(e.name),e),name:"Network Element",disableViews:["raw","list"],onEdit:e=>(console.log("DATA (onEdit): ",e),e),columns:l.Z.columns(l.Z.column("name",e=>e.name,"name")),onAddButton:Z,model:i._m,pageState:n,dataTableGridProps:X,defaultView:"topology"})]})},tp=n(97729),tx=n.n(tp),tm=n(21498);function tf(e){let t=tm.l.projectName;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tx(),{children:(0,r.jsx)("title",{children:t+" - Network"})}),(0,r.jsx)(tg,{...e})]})}},15612:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(25184);(0,r.Protofy)("features",{adminPage:"/apis"});let o=r.Schema.object((0,r.Protofy)("schema",{name:r.Schema.string().id().static()}));(0,r.Protofy)("api",{name:"apis",prefix:"/api/core/v1/"});let i=r.AutoModel.createDerived("ObjectModel",o)},92580:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var r=n(60942);let o={"custom-api":{id:"custom-api-diagram",name:"Diagram + AI",description:"Use visual diagrams and AI to create custom tasks to be used in your boards",icon:n(97981).j},"custom-api-code":{id:"custom-api",name:"Code + AI",description:"Use code and AI to create custom tasks to be used in your boards",icon:r.x}}}},function(e){e.O(0,[7952,7205,6244,5045,8001,1417,8917,9108,425,2888,9774,179],function(){return e(e.s=95925)}),_N_E=e.O()}]);