(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5742],{77261:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/assets",function(){return t(19632)}])},19632:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var n=t(52322),a=t(2784),r=t(7211),o=t(19653),i=t(37288),l=t(47401),c=t(14503),d=t(17518),u=t(25184),p=t(6712),h=t(5632),w=t(65606),x=t(22958),m=t(3828);(0,u.getLogger)(),(0,u.Protofy)("features",{adminPage:"/objects/view?object=assetsModel"});let f=u.Schema.object((0,u.Protofy)("schema",{name:u.z.string().id().search()})),g=Object.keys(f.shape).some(e=>f.shape[e]._def.id),j=u.Schema.object({...g?{}:u.BaseSchema.shape,...f.shape});class v extends u.ProtoModel{static getApiOptions(){return(0,u.Protofy)("api",{name:"players",prefix:"/api/v1/"})}create(e){return super.create(e)}read(e){return super.read(e)}update(e,s){return super.update(e,s)}list(e,s,t,n,a){let r=super.list(e,s,t,n,a),o=null==n?void 0:n.tag;if(o){let e=null==r?void 0:r.tags;if(!e||!Array.isArray(e)||!e.includes(o))return}return r}delete(e){return super.delete(e)}static _newInstance(e,s){return new v(e,s)}static load(e,s){return this._newInstance(e,s)}constructor(e,s){super(e,j,s,"Assets")}}var b=t(93228),y=t(87690),A=t(19940);let P=e=>{let{element:s,...t}=e;return(0,n.jsx)(n.Fragment,{children:s.icon?(0,n.jsx)(o.E,{src:"/api/core/v1/files?path=data/assets/".concat(s.name,"/").concat(s.icon),alt:s.name,width:"100%",height:"180px",objectFit:"cover",...t}):(0,n.jsx)(i.FA,{height:"180px",ai:"center",jc:"center",...t,children:(0,n.jsx)(p.L,{size:50,color:"$gray8"})})})},_=e=>{var s;let{element:t,loading:a,...r}=e,o=null===(s=t.format)||void 0===s?void 0:s.includes("logs");return(0,n.jsx)(l.zx,{w:"100%",bc:o?"$gray6":"$color7",...r,children:a.includes(t.name)?"Installing...":o?"Reinstall":"Install"})};var $=function(e){let{initialFilesState:s,pageSession:t,initialItems:o,pageState:l}=e,[p,f]=(0,a.useState)([]),[g,j]=(0,a.useState)(!1),$=(0,c.Py)(),{pathname:S,query:I,push:F,replace:k}=(0,h.useRouter)(),E=(0,A.Tg)("assets.create"),z=(0,A.Tg)("assets.update"),N=async e=>{f([e]),await u.API.post("/api/core/v1/assets/install",{assets:[e]}),f([]),$.show("Assets installed successfully. Please refresh the page to see the changes."),(0,w.d)()?window.electronAPI.refreshWindow():void 0!=window&&void 0!=window.location&&window.location.reload()},T=async e=>{j(!1)};return(0,n.jsx)(r.D,{pageSession:t,title:"assets",onActionBarEvent:e=>{"open-store"===e.type&&((0,w.d)()?window.electronAPI.openWindow("store"):window.open("https://protofy.xyz/store","_blank"))},actionBar:{hideable:!1},children:(0,n.jsxs)(i.FA,{f:1,children:[(0,n.jsx)(x.V,{openMode:"view",sourceUrl:"/api/core/v1/assets",initialItems:o,numColumnsForm:1,name:"assets",disableViewSelector:!1,defaultView:"grid",disableViews:["raw"],quickRefresh:!0,onSelectItem:()=>{},columns:m.Z.columns(m.Z.column("",e=>(0,n.jsx)(P,{element:e,h:"50px",w:"50px",br:"$4"}),!1,void 0,!0,"90px"),m.Z.column("name",e=>e.name,!1,void 0,!0,"150px"),m.Z.column("description",e=>null==e?void 0:e.description,!1,void 0,!0,"400px"),m.Z.column("",e=>z?(0,n.jsx)(_,{element:e,loading:p,br:"$10",size:"$3",w:"80px",onPress:()=>N(e.name)}):null,!1,void 0,!0,"115px")),dataTableGridProps:{marginTop:"$10",getCard:(e,s)=>(0,n.jsxs)(i.FA,{br:"$6",w:s,bc:"$bgPanel",overflow:"hidden",children:[(0,n.jsx)(P,{element:e}),(0,n.jsxs)(i.FA,{p:"$4",gap:"$4",ai:"flex-start",children:[(0,n.jsx)(i.sL,{jc:"space-between",w:"100%",children:(0,n.jsx)(d.x,{fontSize:"$8",fow:"600",children:e.name})}),z&&(0,n.jsx)(_,{element:e,loading:p,onPress:()=>N(e.name)})]})]})},onAddButton:E?()=>j(!0):void 0,model:v,pageState:l,icons:{}}),(0,n.jsx)(b.a,{open:g,setOpen:j,hideAccept:!0,p:"$0",height:"600px",width:"600px",children:(0,n.jsx)(y.Q,{path:"/data/assets",onUpload:T,setShowUploadDialog:j})})]})})},S=t(97729),I=t.n(S),F=t(21498);function k(e){let s=F.l.projectName;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I(),{children:(0,n.jsx)("title",{children:s+" - Assets"})}),(0,n.jsx)($,{...e})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=77261)}),_N_E=e.O()}]);