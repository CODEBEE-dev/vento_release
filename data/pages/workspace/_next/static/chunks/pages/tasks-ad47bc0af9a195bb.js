(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3689],{52989:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return i(70268)}])},70268:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return B}});var a=i(52322),n=i(15612),o=i(37288),r=i(65457),s=i(86407),d=i(90072),l=i(22522),c=i(51775),u=i(17518),m=i(14503),p=i(39608),h=i(60166),x=i(25184),j=i(36265),f=i(5893),g=i(78822),v=i(3828),b=i(22958),y=i(93228),$=i(7211),A=i(2784),I=i(43850),w=i(70142),P=i(33943),T=i(8448),S=i(92580),C=i(60417),q=i(38917),k=i(19940);let D={},E="custom-api",N=e=>{var t;let i=null!==(t=S.e[E])&&void 0!==t?t:Object.values(S.e)[0];return e&&S.e[e]?S.e[e]:i},F=e=>{let{children:t}=e;return(0,a.jsx)(o.sL,{jc:"center",ai:"center",gap:25,flexWrap:"wrap",children:t})},z=e=>{let{selected:t,setSelected:i}=e;return(0,a.jsxs)(o.FA,{children:[(0,a.jsx)(r.p,{mah:"500px",children:(0,a.jsx)(F,{children:Object.entries(S.e).map(e=>{let[n,o]=e;return(0,a.jsx)(C.w,{template:o,isSelected:t===n,onPress:()=>i(n)},n)})})}),(0,a.jsx)(s.LZ,{marginBottom:"$8"})]})},O=e=>{var t;let{data:i,setData:o,error:s,setError:d,objects:l,template:c}=e,u=null!=c?c:N(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.template),m=(null==u?void 0:u.extraFields)?u.extraFields(l):{};return(0,a.jsx)(r.p,{height:"250px",children:(0,a.jsx)(q.EditableObject,{externalErrorHandling:!0,error:s,setError:d,data:i,setData:o,numColumns:(null==u?void 0:u.extraFields)?2:1,mode:"add",title:!1,model:n.h,extraFields:{...m}})})},U=e=>{let{method:t,path:i,description:n,children:o}=e,[r,s]=(0,A.useState)([""]);return(0,a.jsx)(d.U,{onValueChange:e=>s(e),onPress:e=>e.stopPropagation(),type:"multiple",boc:"$gray6",f:1,mb:"$5",width:"640px",children:(0,a.jsxs)(d.U.Item,{br:"$5",bw:1,boc:"$gray6",value:"item",children:[(0,a.jsx)(d.U.Trigger,{p:0,px:8,height:43,bc:"$transparent",focusStyle:{bc:"$transparent"},br:r.includes("item")?"$0":"$5",btlr:"$5",btrr:"$5",bw:"$0",flexDirection:"row",ai:"center",children:e=>{let{open:o}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Kq,{mt:"$2",children:(0,a.jsx)(L,{method:t,path:i,description:n})}),(0,a.jsx)(c.b,{animation:"quick",rotate:o?"180deg":"0deg",children:(0,a.jsx)(h._,{size:"$1"})})]})}}),(0,a.jsx)(d.U.Content,{f:1,br:"$5",children:o})]})})},_=e=>{let{query:t,desc:i}=e;return(0,a.jsx)(w.I,{children:(0,a.jsxs)(o.sL,{mb:"$3",mt:"$3",children:[(0,a.jsx)(g.A,{text:t,color:"$color5",mr:"$3",h:25,w:"100px"}),(0,a.jsxs)(u.x,{children:[" ",i]})]})})},L=e=>{let{method:t,path:i,description:n}=e;return(0,a.jsx)(w.I,{children:(0,a.jsxs)(o.sL,{padding:10,marginVertical:5,width:"600px",ai:"center",mb:"$3",pr:"$10",children:[(0,a.jsxs)(o.sL,{alignItems:"center",space:!0,children:[(0,a.jsx)(l.Kq,{p:"$1",backgroundColor:"GET"===t?"$color8":"$color7",br:"$2",children:(0,a.jsx)(u.x,{fontSize:14,fontWeight:"bold",color:"white",padding:5,borderRadius:5,children:t})}),(0,a.jsx)(u.x,{fontWeight:"bold",flex:1,children:i})]}),(0,a.jsx)(o.sL,{ml:"$3",children:(0,a.jsx)(u.x,{color:"$grey",fontSize:14,children:n})})]})})},R="/api/core/v1/apis";var W=e=>{var t,i,s,d,l,c,h,w,C,q,F,L,W;let{pageState:K,initialItems:V,pageSession:Z,extraData:B}=e,{replace:M,push:G}=(0,j.N)(null!=K?K:{});(0,f.G)(()=>'At this moment the user is browsing the Rest API management page. The Rest API management page allows to list, create, read, update and delete API definitions. API definitions are typescript files using express.\n            The system allows to create APIs either from an empty template, or from an AutoCRUD template. The automatic crud template creates an automatic CRUD API for a given object. \n            To Automatic CRUD API generates the following endpoints: get /api/v1/:objectName (list), post /api/v1/:objectName (create), post /api/v1/:objectName/:objectId (update), get /api/v1/:objectName/:objectId/delete (delete) and get /api/v1/:objectName/:objectId (read)\n            the API files are located at /data/automations. \n            The Automatic CURD system can be manually extended to have more endpoints.\n            The user can edit the API files by clicking on any API, and can choose visual programming using interactive diagrams generated from the source code, or text based tradicional programming to edit the .ts api file.\n            Those APIs allow the user to create pages based on object data. The automatic crud is an "storage" to manage data for a specific object.\n            '+((null==V?void 0:V.isLoaded)?"Currently the system returned the following information: "+JSON.stringify(V.data):""));let[H,X]=(0,A.useState)(!1),[J,Q]=(0,A.useState)(null!==(F=null==B?void 0:B.objects)&&void 0!==F?F:(0,x.getPendingResult)("pending")),[Y,ee]=(0,A.useState)({}),[et,ei]=(0,A.useState)(0),[ea,en]=(0,A.useState)(!1),[eo,er]=(0,A.useState)({data:{template:E}}),[es,ed]=(0,A.useState)(""),el=(0,m.Py)(),ec=(0,k.Tg)("apis.create"),eu=(null==eo?void 0:null===(t=eo.data)||void 0===t?void 0:t.template)&&S.e[eo.data.template]?eo.data.template:E,em=N(null==eo?void 0:null===(i=eo.data)||void 0===i?void 0:i.template);(0,A.useEffect)(()=>{var e;let t=null==eo?void 0:null===(e=eo.data)||void 0===e?void 0:e.template;t&&S.e[t]||er(e=>({...e,data:{...e.data,template:eu}}))},[null==eo?void 0:null===(s=eo.data)||void 0===s?void 0:s.template,eu]);let ep={},eh=(null==Y?void 0:null===(d=Y.data)||void 0===d?void 0:d.object)?J[null==Y?void 0:null===(l=Y.data)||void 0===l?void 0:l.object]:null;return eh&&(ep=eh.apiOptions||{name:null==Y?void 0:null===(L=Y.data)||void 0===L?void 0:L.object,prefix:"/api/v1/"}),(0,P.a)(e=>{x.API.get({url:"/api/core/v1/objects?all=1"},e)},Q,null==B?void 0:B.objects),(0,a.jsxs)($.D,{title:"Tasks",pageSession:Z,children:[(0,a.jsx)(y.a,{p:"$2",pt:"$5",pl:"$5",setOpen:en,open:ea,hideAccept:!0,description:"",children:(0,a.jsx)(o.FA,{f:1,jc:"center",ai:"center",children:(0,a.jsx)(o.sL,{mr:"$5",children:(0,a.jsx)(T.M,{lastButtonCaption:"Create",id:"apis",onFinish:async()=>{try{let e={...eo,data:{...eo.data,template:eu}},t=n.h.load(e.data);if(null==em?void 0:em.extraValidation){let t=em.extraValidation(e.data);if(null==t?void 0:t.error)throw t.error}let i=await x.API.post(R,t.create().getData());if(i.isError)throw i.error;en(!1),el.show("Automation created",{message:t.getId()})}catch(e){ed((0,x.getPendingResult)("error",null,e instanceof x.z.ZodError?e.flatten():e))}},slides:[{name:"Create new Action",title:"Select your Template",component:(0,a.jsx)(z,{selected:eu,setSelected:e=>er({...eo,data:{...eo.data,template:e}})})},{name:null!==(W=null==em?void 0:em.name)&&void 0!==W?W:"Configure your action",title:"Configure your action",component:(0,a.jsx)(O,{error:es,objects:J,setError:ed,data:eo,setData:er,template:em})}]})})})}),(0,a.jsx)(y.a,{acceptCaption:"Close",cancelCaption:"Keep editing",onAccept:async()=>{},open:H,setOpen:X,title:"API Endpoints",description:"",children:(0,a.jsx)(r.p,{maxHeight:"80vh",children:(0,a.jsx)(I.Z,{mt:"$5",children:(0,a.jsxs)(o.FA,{children:[(0,a.jsxs)(U,{method:"GET",path:ep?ep.prefix+ep.name:"",description:"List all "+(null==Y?void 0:null===(c=Y.data)||void 0===c?void 0:c.name)+" entries",children:[(0,a.jsx)(u.x,{mb:"$3",mt:"$",children:"The list API endpoint is designed to provide a paginated, ordered list of items from a dataset. It accepts several query parameters that allow you to customize the response."}),(0,a.jsx)(_,{query:"itemsPerPage",desc:"Defines max items returned per page; defaults to 25."}),(0,a.jsx)(_,{query:"page",desc:"Selects which page of results to retrieve, starting at 0."}),(0,a.jsx)(_,{query:"orderBy",desc:"Specifies field name to sort the results by."}),(0,a.jsx)(_,{query:"orderDirection",desc:"Sets sort direction, ascending ('asc') by default, use 'desc' for descending."}),(0,a.jsx)(_,{query:"all",desc:"If set, returns all results, bypassing pagination."})]}),(0,a.jsxs)(U,{method:"GET",path:ep?ep.prefix+ep.name+"/:id":"",description:"Reads a "+(null==Y?void 0:null===(h=Y.data)||void 0===h?void 0:h.name)+" entry by id",children:[(0,a.jsx)(u.x,{mb:"$3",mt:"$",children:"This 'read' endpoint is used to fetch a specific item based on its unique id. It implements security checks and custom data transformations."}),(0,a.jsx)(_,{query:":id",desc:"The unique id of the item to be retrieved from the dataset."})]}),(0,a.jsx)(U,{method:"POST",path:ep?ep.prefix+ep.name:"",description:"Creates a new "+(null==Y?void 0:null===(w=Y.data)||void 0===w?void 0:w.name)+" entry",children:(0,a.jsx)(u.x,{mb:"$3",mt:"$",children:"The 'create' endpoint is utilized for adding new items to the dataset. It includes data transformations, and event notifications for successful creations."})}),(0,a.jsxs)(U,{method:"POST",path:ep?ep.prefix+ep.name+"/:id":"",description:"Updates a "+(null==Y?void 0:null===(C=Y.data)||void 0===C?void 0:C.name)+" entry by id",children:[(0,a.jsx)(u.x,{mb:"$3",mt:"$",children:"The 'update' endpoint is used for modifying existing items based on their unique id. It includes data transformation processes, and notifications for each update action."}),(0,a.jsx)(_,{query:":id",desc:"The unique id of the item to be updated in the dataset."})]}),(0,a.jsxs)(U,{method:"POST",path:ep?ep.prefix+ep.name+"/:id/delete":"",description:"Deletes a "+(null==Y?void 0:null===(q=Y.data)||void 0===q?void 0:q.name)+" entry by id",children:[(0,a.jsx)(u.x,{mb:"$3",mt:"$",children:"The 'delete' endpoint facilitates the removal of items based on their unique id. It encompasses transformations of the data for deletion, and event notifications for the action performed."}),(0,a.jsx)(_,{query:":id",desc:"The unique id of the item to be deleted from the dataset."})]})]})})})}),(0,a.jsx)(b.V,{onDataAvailable:e=>ei(e),onSelectItem:e=>{G("editFile",e.data.filePath)},sourceUrl:R,initialItems:V,numColumnsForm:1,name:"Task",entityName:"Tasks",columns:v.Z.columns(v.Z.column("name",e=>e.name,"name",e=>(0,a.jsx)(o.sL,{id:"apis-datatable-"+e.name,children:(0,a.jsx)(u.x,{children:e.name})})),v.Z.column("type",e=>e.type,"type",e=>(0,a.jsx)(g.A,{text:e.type.toUpperCase(),color:"AutoAPI"==e.type?"$color5":"$gray5"})),v.Z.column("object",e=>e.object,"object",e=>(0,a.jsx)(g.A,{text:e.object,color:"None"==e.object?"$gray5":"$color5"}))),onAddButton:ec?()=>en(!0):void 0,extraMenuActions:[{text:"View API details",icon:p.b,action:e=>{X(!0),ee(e),console.log("DATA",e)},isVisible:e=>"AutoAPI"===e.data.type}],model:n.h,pageState:K,icons:D})]})},K=i(97729),V=i.n(K),Z=i(21498);function B(e){let t=Z.l.projectName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V(),{children:(0,a.jsx)("title",{children:t+" - Tasks"})}),(0,a.jsx)(W,{...e})]})}},60417:function(e,t,i){"use strict";i.d(t,{w:function(){return d}});var a=i(52322),n=i(37288),o=i(17518),r=i(70142),s=i(49852);let d=e=>{var t,i;let{template:d,isSelected:l,onPress:c}=e;return(0,a.jsx)(r.I,{children:(0,a.jsxs)(n.FA,{id:"template-card-"+d.id,onPress:c,height:"180px",width:"357px",overflow:"hidden",borderWidth:l?"$1":"$0.5",borderColor:l?"$color7":"$gray8",backgroundColor:l?"$color3":"",cursor:"pointer",borderRadius:"$3",justifyContent:"center",alignItems:"center",padding:"$4",children:[(0,a.jsx)(s.p,{size:35,color:"var(--color8)",name:null!==(t=d.icon)&&void 0!==t?t:"layout-dashboard"}),(0,a.jsx)(o.x,{ta:"center",marginBottom:"$2",marginTop:"$4",children:null!==(i=d.name)&&void 0!==i?i:d.id}),(0,a.jsx)(o.x,{ta:"center",fontWeight:"300",opacity:.4,children:d.description})]})})}},15612:function(e,t,i){"use strict";i.d(t,{h:function(){return o}});var a=i(25184);(0,a.Protofy)("features",{adminPage:"/apis"});let n=a.Schema.object((0,a.Protofy)("schema",{name:a.Schema.string().id().static()}));(0,a.Protofy)("api",{name:"apis",prefix:"/api/core/v1/"});let o=a.AutoModel.createDerived("ObjectModel",n)},92580:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});var a=i(60942);let n={"custom-api":{id:"custom-api-diagram",name:"Diagram + AI",description:"Use visual diagrams and AI to create custom tasks to be used in your boards",icon:i(97981).j},"custom-api-code":{id:"custom-api",name:"Code + AI",description:"Use code and AI to create custom tasks to be used in your boards",icon:a.x}}},8448:function(e,t,i){"use strict";i.d(t,{M:function(){return u}});var a=i(52322),n=i(37288),o=i(22522),r=i(17518),s=i(47401),d=i(75136),l=i(2784),c=i(70142);let u=e=>{let{slides:t,lastButtonCaption:i,onFinish:u,id:m="pages",styles:p={},hideHeader:h=!1,disabled:x=!1,loading:j=!1}=e,[f,g]=(0,l.useState)(0),v=t.length,b=f>1?f-1:0,y=f<v-1?f+1:null,$=t.filter((e,t)=>t<=f).map(e=>e.name).join(" / "),A=v===f+1;return(0,a.jsxs)(n.FA,{id:"admin-dataview-create-dlg",p:"$3",pt:"$0",w:800,f:1,...p,children:[!h&&(0,a.jsxs)(n.sL,{id:"admin-eo",justifyContent:"space-between",width:"100%",children:[(0,a.jsx)(o.Kq,{flex:1,children:(0,a.jsx)(r.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:$})}),(0,a.jsx)(o.Kq,{flex:1,alignItems:"flex-end",children:(0,a.jsxs)(r.x,{fontWeight:"500",fontSize:16,color:"$gray9",children:["[",f+1,"/",v,"]"]})})]}),(0,a.jsx)(c.I,{children:(0,a.jsx)(o.Kq,{children:t[f].title&&(0,a.jsx)(r.x,{fontWeight:"500",fontSize:30,color:"$color",children:t[f].title})})}),(0,a.jsx)(o.Kq,{f:1,mt:"$2",children:t[f].component}),(0,a.jsxs)(n.sL,{gap:40,jc:"center",mb:"$1",alignItems:"flex-end",children:[0!==f&&(0,a.jsx)(s.zx,{disabled:x||j,w:250,onPress:e=>{e.stopPropagation(),f>0&&g(b)},children:"Back"}),(0,a.jsx)(c.I,{children:(0,a.jsx)(s.zx,{disabled:x||j,id:"admin-"+m+"-add-btn",w:250,onPress:async e=>{e.stopPropagation(),y?g(y):u&&await u()},icon:A&&j?(0,a.jsx)(d.$,{size:"small",color:"$color"}):void 0,children:A?i:"Next"})})]})]})}}},function(e){e.O(0,[7952,7205,8917,2888,9774,179],function(){return e(e.s=52989)}),_N_E=e.O()}]);