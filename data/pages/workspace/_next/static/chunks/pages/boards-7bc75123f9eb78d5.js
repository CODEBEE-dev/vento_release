(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4426,5373],{40048:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/boards",function(){return n(933)}])},933:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(52322),o=n(88590),r=n(97729),i=n.n(r),l=n(21498);function s(e){let t=l.l.projectName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:t+" - Boards"})}),(0,a.jsx)(o.Z.boards.component,{...e})]})}},88590:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var a=n(52322),o=n(2784),r=n(42589),i=n(25184),l=n(3828),s=n(22958),d=n(7211),c=n(70952),u=n(20176),m=n(68491),p=n(53601),v=n(59302),w=n(37288),h=n(65457),g=n(86407),x=n(26602),j=n(17518),f=n(93228),b=n(8448),A=n(60417),y=n(33943),P=n(55373);let C=e=>{var t,n,r,l,s,d,c,u;let{board:m,card:p,mode:v="view"}=e,[w,h]=(0,o.useState)((0,i.getPendingResult)("pending"));return((0,y.a)(e=>{i.API.get({url:"/api/core/v1/boards/".concat(m,"/cards/").concat(p,"/info")+("run"==v?"/run":"")},e)},h,w),(0,o.useEffect)(()=>{window.executeAction=async(e,t)=>await window.onRunListeners[e](e,t),window.executeActionForm=async(e,t)=>{e.preventDefault();let n=Object.fromEntries(new FormData(e.target).entries()),a={};for(let e in n)(n[e]||"0"===n[e])&&(a[e]=n[e]);return await window.onRunListeners[t](t,a)}},[]),"pending"===w.status)?(0,a.jsx)("h1",{children:"Loading..."}):"error"===w.status?(0,a.jsx)("h1",{children:"Error loading card"}):(0,a.jsx)(P.ActionRunner,{setData:e=>{console.log("set data from action runner")},id:null==w?void 0:null===(t=w.data)||void 0===t?void 0:t.key,data:null==w?void 0:w.data,displayResponse:null==w?void 0:null===(n=w.data)||void 0===n?void 0:n.displayResponse,name:null==w?void 0:null===(r=w.data)||void 0===r?void 0:r.name,description:"Run action",actionParams:null==w?void 0:null===(l=w.data)||void 0===l?void 0:l.params,onRun:async(e,t,n)=>{let a=Object.keys(t).map(e=>e+"="+t[e]).join("&"),o=await i.API.get("/api/core/v1/boards/".concat(m,"/cards/").concat(e,"/run")+"?"+a);o.isLoaded&&(console.log("setting cardd data to: ",{...w,data:{...w.data,value:o.data}}),h({...w,data:{...w.data,value:o.data}}))},icon:null==w?void 0:null===(s=w.data)||void 0===s?void 0:s.icon,color:null==w?void 0:null===(d=w.data)||void 0===d?void 0:d.color,html:null==w?void 0:null===(c=w.data)||void 0===c?void 0:c.html,value:null==w?void 0:null===(u=w.data)||void 0===u?void 0:u.value})};var R=n(39608),_=n(75948),E=n(36265),N=n(70142),S=n(40826),D=n(19940);let{useParams:F}=(0,m.X)(),I="/api/core/v1/boards",$=e=>{let{children:t}=e;return(0,a.jsx)(w.sL,{jc:"center",ai:"center",gap:25,flexWrap:"wrap",children:t})},L=e=>{let{selected:t,setSelected:n}=e,[r,l]=(0,o.useState)([]),s=async()=>{let e=(await i.API.get("/api/core/v2/templates/boards")).data||[];l(e=e.map(e=>e))};return(0,o.useEffect)(()=>{s()},[]),(0,a.jsxs)(w.FA,{children:[(0,a.jsx)(h.p,{mah:"500px",children:(0,a.jsx)($,{children:Object.entries(r).map(e=>{let[o,r]=e;return(0,a.jsx)(A.w,{template:r,isSelected:(null==t?void 0:t.id)===(null==r?void 0:r.id),onPress:()=>n(r)},o)})})}),(0,a.jsx)(g.LZ,{marginBottom:"$8"})]})},T=e=>""!=e&&/^[a-z_]*$/.test(e),k=e=>{let{selected:t,setName:n,errorMessage:r=""}=e,[i,l]=(0,o.useState)("");return(0,o.useEffect)(()=>l(r),[r]),(0,a.jsx)(w.FA,{minHeight:"200px",jc:"center",ai:"center",children:(0,a.jsxs)(w.FA,{width:"400px",gap:"$2",children:[(0,a.jsx)(x.II,{f:1,value:null==t?void 0:t.name,onChangeText:e=>{T(e)?l(""):l("Name is required and must use only lowercase letters and underscores"),n(e)},placeholder:"Enter agent name"}),(0,a.jsx)(j.x,{ml:"$2",h:"$1",fos:"$2",color:"$red8",children:i})]})})};var O={boards:{component:e=>{let{workspace:t,pageState:n,initialItems:m,itemData:p,pageSession:v,extraData:h}=e,g=(0,c.t)(),{push:x,query:j}=(0,E.N)({}),[A,y]=o.useState(!1),P=(0,D.Tg)("boards.create"),C=(0,D.Tg)("boards.delete"),[F,$]=(0,o.useState)({template:{id:"ai agent"},name:""});return(0,a.jsxs)(d.D,{title:"Boards",workspace:t,pageSession:v,children:[(0,a.jsx)(f.a,{p:"$2",pt:"$5",pl:"$5",setOpen:y,open:A,hideAccept:!0,description:"",children:(0,a.jsx)(w.FA,{f:1,jc:"center",ai:"center",children:(0,a.jsx)(w.sL,{mr:"$5",children:(0,a.jsx)(b.M,{lastButtonCaption:"Create",id:"boards",onFinish:async()=>{console.log("val: ",F);let e=F.name;if(!T(e))return;let t=F.template;await i.API.post("/api/core/v1/import/board",{name:e,template:t}),g.push("/boards/view?board=".concat(e))},slides:[{name:"Create new Agent",title:"Select your Template",component:(0,a.jsx)(L,{selected:null==F?void 0:F.template,setSelected:e=>$({...F,template:e})})},{name:"Configure your Agent",title:"Agent Name",component:(0,a.jsx)(k,{selected:F,setName:e=>$({...F,name:e})})}]})})})}),(0,a.jsx)(s.V,{entityName:"agents",itemData:p,sourceUrl:I,sourceUrlParams:j,extraActions:[(0,a.jsx)(N.I,{children:(0,a.jsx)(s.N,{id:"admin-dataview-add-btn",icon:"true"===j.all?_._:R.b,description:"true"===j.all?"Show only boards visible in this view":"Show boards from all views",onPress:()=>{x("all","true"===j.all?"false":"true")}})},"toggle-visibility-scope")],extraFilters:[{queryParam:"all"}],initialItems:m,numColumnsForm:1,onAdd:e=>(g.push("/boards/view?board=".concat(e.name)),e),name:"Agent",disableViews:["raw"],onEdit:e=>(console.log("DATA (onEdit): ",e),e),onSelectItem:e=>g.push("/boards/view?board=".concat(e.data.name)),columns:l.Z.columns(l.Z.column("name",e=>e.name,"name")),onAddButton:P?()=>y(!0):void 0,model:r._m,pageState:n,dataTableGridProps:{itemsTransform:e=>{let t=Array.isArray(e)?[...e]:[];return"true"!==j.all?t.filter(e=>(0,S.s)(e,"agents")):t},getCard:(e,t)=>(0,a.jsx)(u.tY,{board:e,platform:e.platform||"virtual",width:t,showNavIcons:!0,onDelete:C?async()=>{await i.API.get("".concat(I,"/").concat(e.name,"/delete"))}:void 0})},defaultView:"grid"})]})}},view:{component:e=>{let{params:t}=F();return(0,a.jsx)(p.P,{ready:!!t.board,children:(0,a.jsx)(v.tT,{...e,board:void 0},t.board)})}},card:{component:e=>{let{board:t,card:n,mode:o}=e;return(0,a.jsx)(C,{board:t,card:n,mode:o})}}}},55373:function(e,t,n){"use strict";n.r(t),n.d(t,{ActionRunner:function(){return s}});var a=n(52322),o=n(37288),r=n(2784),i=n(56274),l=n(71276);let s=e=>{let{id:t=null,setData:n=(e,t)=>{},name:s,data:d,displayResponse:c,value:u,html:m,caption:p="Run",description:v="",actionParams:w={},onRun:h,icon:g,color:x="var(--color7)",...j}=e;(0,r.useEffect)(()=>{window.onRunListeners||(window.onRunListeners={}),window.onRunListeners[s]=h,window.onChangeCardData||(window.onChangeCardData={}),window.onChangeCardData[s]=e=>n(e,s)},[s]);let f=(null==m?void 0:m.length)>0?m:l.R[null==d?void 0:d.type]||l.R.action,b={...j,...d,icon:g,name:s,params:w,color:x,displayResponse:c,value:u};return(0,a.jsx)(o.FA,{h:"100%",children:(0,a.jsx)(i.bP,{style:{width:"100%",height:"100%"},html:f,data:b,setData:e=>{n(e,t)}})})}}},function(e){e.O(0,[7952,7205,6244,5045,1417,8917,9108,2888,9774,179],function(){return e(e.s=40048)}),_N_E=e.O()}]);