"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[679],{1184(e,n,i){i.d(n,{R:()=>d,x:()=>a});var s=i(4041);const t={},r=s.createContext(t);function d(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(r.Provider,{value:n},e.children)}},8114(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"objects/dataview","title":"DataView Component","description":"DataView is a React component that renders complete CRUD interfaces with automatic real-time updates.","source":"@site/docs/objects/dataview.md","sourceDirName":"objects","slug":"/objects/dataview","permalink":"/docs/docs/objects/dataview","draft":false,"unlisted":false,"editUrl":"https://github.com/protofy-xyz/protofy/tree/main/apps/docs/docs/objects/dataview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"AutoAPI","permalink":"/docs/docs/objects/autoapi"},"next":{"title":"Data Objects Overview","permalink":"/docs/docs/objects/overview"}}');var t=i(1085),r=i(1184);const d={},a="DataView Component",l={},o=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Features",id:"features",level:2},{value:"Props",id:"props",level:2},{value:"Real-Time Updates",id:"real-time-updates",level:2},{value:"Custom Fields",id:"custom-fields",level:2},{value:"Disabling Real-Time",id:"disabling-real-time",level:2},{value:"Search Modes",id:"search-modes",level:2},{value:"Standard Search",id:"standard-search",level:3},{value:"AI Search",id:"ai-search",level:3},{value:"View Types",id:"view-types",level:2},{value:"List View (Default)",id:"list-view-default",level:3},{value:"Grid View",id:"grid-view",level:3},{value:"Raw View",id:"raw-view",level:3},{value:"Map View",id:"map-view",level:3},{value:"Integration with AutoAPI",id:"integration-with-autoapi",level:2},{value:"Pagination",id:"pagination",level:2},{value:"Form Generation",id:"form-generation",level:2},{value:"Field Modifiers",id:"field-modifiers",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"dataview-component",children:"DataView Component"})}),"\n",(0,t.jsx)(n.p,{children:"DataView is a React component that renders complete CRUD interfaces with automatic real-time updates."}),"\n",(0,t.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { DataView } from 'protolib/components/DataView'\nimport { ProductsModel } from '@/objects/products'\n\nfunction ProductsPage() {\n    return (\n        <DataView\n            model={ProductsModel}\n            sourceUrl=\"/api/v1/products\"\n            name=\"products\"\n        />\n    )\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Auto-refresh"}),": Subscribes to MQTT notifications and updates in real-time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multiple Views"}),": List, Grid, Raw JSON, Map (for geo data)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pagination"}),": Built-in with page navigation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Search"}),": Full-text and AI-powered search"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Filters"}),": Custom filter components"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CRUD Dialogs"}),": Add/Edit forms generated from schema"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Selection"}),": Multi-select for bulk operations"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"props",children:"Props"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface DataViewProps {\n    // Required\n    model: any;              // ProtoModel class\n    sourceUrl: string;       // AutoAPI endpoint URL\n    name: string;            // Display name\n    \n    // Optional: View configuration\n    defaultView?: 'list' | 'grid' | 'raw' | 'map';\n    disableViewSelector?: boolean;\n    \n    // Optional: Feature toggles\n    hideAdd?: boolean;\n    hideSearch?: boolean;\n    hideFilters?: boolean;\n    hidePagination?: boolean;\n    disableNotifications?: boolean;\n    \n    // Optional: Callbacks\n    onSelectItem?: (item: any) => void;\n    onEdit?: (data: any) => any;\n    onDelete?: (data: any) => any;\n    onAdd?: (data: any) => any;\n    \n    // Optional: Customization\n    itemData?: any;\n    rowIcon?: any;\n    extraFields?: Record<string, { component: (item) => ReactNode }>;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"real-time-updates",children:"Real-Time Updates"}),"\n",(0,t.jsxs)(n.p,{children:["DataView uses ",(0,t.jsx)(n.code,{children:"useRemoteStateList"})," to subscribe to MQTT:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Internally, DataView subscribes to:\nconst topic = model.getNotificationsTopic()\n// e.g., 'notifications/products/#'\n\n// When MQTT message arrives:\n// - create: Prepends new item\n// - update: Updates matching item  \n// - delete: Removes item\n"})}),"\n",(0,t.jsx)(n.h2,{id:"custom-fields",children:"Custom Fields"}),"\n",(0,t.jsx)(n.p,{children:"Add custom columns:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<DataView\n    model={ProductsModel}\n    sourceUrl="/api/v1/products"\n    name="products"\n    extraFields={{\n        profit: {\n            component: (item) => (\n                <Text color="green">\n                    ${(item.price - item.cost).toFixed(2)}\n                </Text>\n            )\n        }\n    }}\n/>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"disabling-real-time",children:"Disabling Real-Time"}),"\n",(0,t.jsx)(n.p,{children:"For performance or specific use cases:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<DataView\n    model={ProductsModel}\n    sourceUrl="/api/v1/products"\n    name="products"\n    disableNotifications={true}\n/>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"search-modes",children:"Search Modes"}),"\n",(0,t.jsx)(n.h3,{id:"standard-search",children:"Standard Search"}),"\n",(0,t.jsx)(n.p,{children:"Searches indexed fields:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// User types "phone" in search box\n// Request: GET /api/v1/products?search=phone\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ai-search",children:"AI Search"}),"\n",(0,t.jsx)(n.p,{children:"Enable AI-powered natural language search:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Request: GET /api/v1/products?search=products%20under%20$100&mode=ai\n"})}),"\n",(0,t.jsx)(n.h2,{id:"view-types",children:"View Types"}),"\n",(0,t.jsx)(n.h3,{id:"list-view-default",children:"List View (Default)"}),"\n",(0,t.jsx)(n.p,{children:"Table with sortable columns:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Click column headers to sort"}),"\n",(0,t.jsx)(n.li,{children:"Row actions on hover"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"grid-view",children:"Grid View"}),"\n",(0,t.jsx)(n.p,{children:"Card-based layout:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Better for visual items"}),"\n",(0,t.jsx)(n.li,{children:"Configurable card size"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"raw-view",children:"Raw View"}),"\n",(0,t.jsx)(n.p,{children:"JSON editor:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"View/edit raw data"}),"\n",(0,t.jsx)(n.li,{children:"Good for debugging"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"map-view",children:"Map View"}),"\n",(0,t.jsx)(n.p,{children:"Geographic visualization:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Requires ",(0,t.jsx)(n.code,{children:"location"})," field with coordinates"]}),"\n",(0,t.jsx)(n.li,{children:"Clustered markers"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-autoapi",children:"Integration with AutoAPI"}),"\n",(0,t.jsx)(n.p,{children:"DataView is designed to work with AutoAPI endpoints:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// AutoAPI creates:\n// - GET /api/v1/products (list, paginated)\n// - POST /api/v1/products (create)\n// - GET /api/v1/products/:id (read)\n// - POST /api/v1/products/:id (update)\n// - GET /api/v1/products/:id/delete (delete)\n\n// DataView uses these automatically based on model\n"})}),"\n",(0,t.jsx)(n.h2,{id:"pagination",children:"Pagination"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<DataView\n    model={ProductsModel}\n    sourceUrl="/api/v1/products"\n    name="products"\n    // Pagination controlled by AutoAPI\n    // Default: 25 items per page\n/>\n'})}),"\n",(0,t.jsx)(n.p,{children:"Query params:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"page"}),": Page number (0-indexed)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"itemsPerPage"}),": Items per page"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"orderBy"}),": Sort field"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"orderDirection"}),": ",(0,t.jsx)(n.code,{children:"asc"})," or ",(0,t.jsx)(n.code,{children:"desc"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"form-generation",children:"Form Generation"}),"\n",(0,t.jsx)(n.p,{children:"Add/Edit forms are generated from model schema:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Schema fields become form inputs\nconst schema = Schema.object({\n    name: z.string(),           // \u2192 Text input\n    price: z.number(),          // \u2192 Number input\n    active: z.boolean(),        // \u2192 Checkbox\n    category: z.enum([...]),    // \u2192 Select dropdown\n    tags: z.array(z.string()),  // \u2192 Tag input\n})\n"})}),"\n",(0,t.jsx)(n.h3,{id:"field-modifiers",children:"Field Modifiers"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Modifier"}),(0,t.jsx)(n.th,{children:"Effect on Form"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".hidden()"})}),(0,t.jsx)(n.td,{children:"Field not shown"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".static()"})}),(0,t.jsx)(n.td,{children:"Read-only after create"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".secret()"})}),(0,t.jsx)(n.td,{children:"Password input"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".textArea()"})}),(0,t.jsx)(n.td,{children:"Multi-line text"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".datePicker()"})}),(0,t.jsx)(n.td,{children:"Date picker"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".color()"})}),(0,t.jsx)(n.td,{children:"Color picker"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:".file()"})}),(0,t.jsx)(n.td,{children:"File upload"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);